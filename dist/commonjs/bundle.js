var Cr=Object.create;var ue=Object.defineProperty,Er=Object.defineProperties,jr=Object.getOwnPropertyDescriptor,Ar=Object.getOwnPropertyDescriptors,_r=Object.getOwnPropertyNames,rn=Object.getOwnPropertySymbols,Fr=Object.getPrototypeOf,on=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable;var sn=(t,e,n)=>e in t?ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||(e={}))on.call(e,n)&&sn(t,n,e[n]);if(rn)for(var n of rn(e))Rr.call(e,n)&&sn(t,n,e[n]);return t},V=(t,e)=>Er(t,Ar(e)),cn=t=>ue(t,"__esModule",{value:!0});var X=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Tr=(t,e)=>{for(var n in e)ue(t,n,{get:e[n],enumerable:!0})},un=(t,e,n,d)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of _r(e))!on.call(t,a)&&(n||a!=="default")&&ue(t,a,{get:()=>e[a],enumerable:!(d=jr(e,a))||d.enumerable});return t},B=(t,e)=>un(cn(ue(t!=null?Cr(Fr(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Br=(t=>(e,n)=>t&&t.get(e)||(n=un(cn({}),e,1),t&&t.set(e,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var Tn=X(()=>{var Le=require("handlebars/dist/handlebars.runtime"),uo=Le.template,fo=Le.templates=Le.templates||{};fo["smcat.template.hbs"]=uo({1:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.hooks.blockHelperMissing,m=t.lookupProperty||function(k,$){if(Object.prototype.hasOwnProperty.call(k,$))return k[$]},p="",o=(o=m(n,"note")||(e!=null?m(e,"note"):e))!=null?o:c,h={name:"note",hash:{},fn:t.program(2,a,0),inverse:t.noop,data:a,loc:{start:{line:2,column:0},end:{line:4,column:9}}},u=typeof o==f?o.call(r,h):o;return(u=m(n,"note")?u:g.call(e,u,h))!=null&&(p+=u),p+=(u=(m(n,"quotifyState")||e&&m(e,"quotifyState")||c).call(r,e!=null?m(e,"name"):e,{name:"quotifyState",hash:{},fn:t.program(4,a,0),inverse:t.noop,data:a,loc:{start:{line:5,column:0},end:{line:5,column:40}}}))!=null?u:"",o=(o=m(n,"hasExtendedAttributes")||(e!=null?m(e,"hasExtendedAttributes"):e))!=null?o:c,h={name:"hasExtendedAttributes",hash:{},fn:t.program(6,a,0),inverse:t.noop,data:a,loc:{start:{line:6,column:4},end:{line:6,column:270}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"hasExtendedAttributes")?u:g.call(e,u,h))!=null&&(p+=u),p+=(u=m(n,"if").call(r,e!=null?m(e,"actions"):e,{name:"if",hash:{},fn:t.program(18,a,0),inverse:t.noop,data:a,loc:{start:{line:7,column:4},end:{line:7,column:28}}}))!=null?u:"",o=(o=m(n,"actions")||(e!=null?m(e,"actions"):e))!=null?o:c,h={name:"actions",hash:{},fn:t.program(20,a,0),inverse:t.noop,data:a,loc:{start:{line:7,column:28},end:{line:7,column:93}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"actions")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"statemachine")||(e!=null?m(e,"statemachine"):e))!=null?o:c,h={name:"statemachine",hash:{},fn:t.program(22,a,0),inverse:t.noop,data:a,loc:{start:{line:8,column:4},end:{line:10,column:19}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"statemachine")?u:g.call(e,u,h))!=null&&(p+=u),p+((u=m(n,"if").call(r,a&&m(a,"last"),{name:"if",hash:{},fn:t.program(24,a,0),inverse:t.program(26,a,0),data:a,loc:{start:{line:11,column:0},end:{line:11,column:30}}}))!=null?u:"")+`
`},2:function(t,e,n,d,a){return"# "+((e=t.lambda(e,e))!=null?e:"")+`
`},4:function(t,e,n,d,a){return""},6:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.hooks.blockHelperMissing,m=t.lookupProperty||function(k,$){if(Object.prototype.hasOwnProperty.call(k,$))return k[$]},p=" [",o=(o=m(n,"typeExplicitlySet")||(e!=null?m(e,"typeExplicitlySet"):e))!=null?o:c,h={name:"typeExplicitlySet",hash:{},fn:t.program(7,a,0),inverse:t.noop,data:a,loc:{start:{line:6,column:32},end:{line:6,column:107}}},u=typeof o==f?o.call(r,h):o;return(u=m(n,"typeExplicitlySet")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"label")||(e!=null?m(e,"label"):e))!=null?o:c,h={name:"label",hash:{},fn:t.program(10,a,0),inverse:t.noop,data:a,loc:{start:{line:6,column:107},end:{line:6,column:142}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"label")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"color")||(e!=null?m(e,"color"):e))!=null?o:c,h={name:"color",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:6,column:142},end:{line:6,column:178}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"color")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"class")||(e!=null?m(e,"class"):e))!=null?o:c,h={name:"class",hash:{},fn:t.program(14,a,0),inverse:t.noop,data:a,loc:{start:{line:6,column:178},end:{line:6,column:214}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"class")?u:g.call(e,u,h))!=null&&(p+=u),p+((u=m(n,"if").call(r,e!=null?m(e,"active"):e,{name:"if",hash:{},fn:t.program(16,a,0),inverse:t.noop,data:a,loc:{start:{line:6,column:214},end:{line:6,column:242}}}))!=null?u:"")+"]"},7:function(t,e,n,d,c){var r=t.lookupProperty||function(g,m){if(Object.prototype.hasOwnProperty.call(g,m))return g[m]},f=(f=r(n,"type")||(e!=null?r(e,"type"):e))!=null?f:t.hooks.helperMissing,c={name:"type",hash:{},fn:t.program(8,c,0),inverse:t.noop,data:c,loc:{start:{line:6,column:54},end:{line:6,column:85}}},f=typeof f=="function"?f.call(e!=null?e:t.nullContext||{},c):f;return(f=r(n,"type")?f:t.hooks.blockHelperMissing.call(e,f,c))!=null?f:""},8:function(t,e,n,d,a){return"type="+((e=t.lambda(e,e))!=null?e:"")+" "},10:function(t,e,n,d,a){return'label="'+((e=t.lambda(e,e))!=null?e:"")+'"'},12:function(t,e,n,d,a){return' color="'+((e=t.lambda(e,e))!=null?e:"")+'"'},14:function(t,e,n,d,a){return' class="'+((e=t.lambda(e,e))!=null?e:"")+'"'},16:function(t,e,n,d,a){return" active"},18:function(t,e,n,d,a){return": "},20:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return(a=(r(n,"quotifyActions")||e&&r(e,"quotifyActions")||t.hooks.helperMissing).call(e!=null?e:t.nullContext||{},e,{name:"quotifyActions",hash:{},fn:t.program(4,a,0),inverse:t.noop,data:a,loc:{start:{line:7,column:40},end:{line:7,column:80}}}))!=null?a:""},22:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return` {
`+((t=t.invokePartial(r(d,"smcat.template.hbs"),e,{name:"smcat.template.hbs",data:a,indent:"    ",helpers:n,partials:d,decorators:t.decorators}))!=null?t:"")+"}"},24:function(t,e,n,d,a){return";"},26:function(t,e,n,d,a){return","},28:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.hooks.blockHelperMissing,m=t.lookupProperty||function(k,$){if(Object.prototype.hasOwnProperty.call(k,$))return k[$]},p="",o=(o=m(n,"note")||(e!=null?m(e,"note"):e))!=null?o:c,h={name:"note",hash:{},fn:t.program(2,a,0),inverse:t.noop,data:a,loc:{start:{line:15,column:0},end:{line:17,column:9}}},u=typeof o==f?o.call(r,h):o;return(u=m(n,"note")?u:g.call(e,u,h))!=null&&(p+=u),p+=((u=(m(n,"quotifyState")||e&&m(e,"quotifyState")||c).call(r,e!=null?m(e,"from"):e,{name:"quotifyState",hash:{},fn:t.program(4,a,0),inverse:t.noop,data:a,loc:{start:{line:18,column:0},end:{line:18,column:39}}}))!=null?u:"")+" => "+((u=(m(n,"quotifyState")||e&&m(e,"quotifyState")||c).call(r,e!=null?m(e,"to"):e,{name:"quotifyState",hash:{},fn:t.program(4,a,0),inverse:t.noop,data:a,loc:{start:{line:18,column:43},end:{line:18,column:81}}}))!=null?u:""),o=(o=m(n,"hasExtendedAttributes")||(e!=null?m(e,"hasExtendedAttributes"):e))!=null?o:c,h={name:"hasExtendedAttributes",hash:{},fn:t.program(29,a,0),inverse:t.noop,data:a,loc:{start:{line:19,column:4},end:{line:19,column:130}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"hasExtendedAttributes")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"label")||(e!=null?m(e,"label"):e))!=null?o:c,h={name:"label",hash:{},fn:t.program(34,a,0),inverse:t.noop,data:a,loc:{start:{line:20,column:4},end:{line:20,column:62}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"label")?u:g.call(e,u,h))!=null&&(p+=u),p+`;
`},29:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.hooks.blockHelperMissing,m=t.lookupProperty||function(k,$){if(Object.prototype.hasOwnProperty.call(k,$))return k[$]},p=" [",o=(o=m(n,"color")||(e!=null?m(e,"color"):e))!=null?o:c,h={name:"color",hash:{},fn:t.program(30,a,0),inverse:t.noop,data:a,loc:{start:{line:19,column:32},end:{line:19,column:68}}},u=typeof o==f?o.call(r,h):o;return(u=m(n,"color")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"type")||(e!=null?m(e,"type"):e))!=null?o:c,h={name:"type",hash:{},fn:t.program(32,a,0),inverse:t.noop,data:a,loc:{start:{line:19,column:69},end:{line:19,column:102}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"type")?u:g.call(e,u,h))!=null&&(p+=u),p+"]"},30:function(t,e,n,d,a){return'color="'+((e=t.lambda(e,e))!=null?e:"")+'"'},32:function(t,e,n,d,a){return" type="+((e=t.lambda(e,e))!=null?e:"")},34:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return": "+((a=(r(n,"quotifyLabel")||e&&r(e,"quotifyLabel")||t.hooks.helperMissing).call(e!=null?e:t.nullContext||{},e,{name:"quotifyLabel",hash:{},fn:t.program(4,a,0),inverse:t.noop,data:a,loc:{start:{line:20,column:16},end:{line:20,column:52}}}))!=null?a:"")},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,m){var r=e!=null?e:t.nullContext||{},c=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]},f=((p=c(n,"each").call(r,e!=null?c(e,"states"):e,{name:"each",hash:{},fn:t.program(1,m,0),inverse:t.noop,data:m,loc:{start:{line:1,column:0},end:{line:12,column:9}}}))!=null?p:"")+`
`,g=(g=c(n,"transitions")||(e!=null?c(e,"transitions"):e))!=null?g:t.hooks.helperMissing,m={name:"transitions",hash:{},fn:t.program(28,m,0),inverse:t.noop,data:m,loc:{start:{line:14,column:0},end:{line:21,column:16}}},p=typeof g=="function"?g.call(r,m):g;return(p=c(n,"transitions")?p:t.hooks.blockHelperMissing.call(e,p,m))!=null&&(f+=p),f},usePartial:!0,useData:!0})});var qn=X((ts,Hn)=>{var le=require("handlebars/dist/handlebars.runtime.js"),Bn=require("lodash.clonedeep");Tn();var mo=/;|,|{| |\[/,po=/;|,|{/,ho=/;|{/;function ze(t,e){return t.test(e)?`"${e}"`:e}le.registerPartial("smcat.template.hbs",le.templates["smcat.template.hbs"]);function go(t){return t==="activity"?"":`${t}/ `}function yo(t){let e=F({},t);return e.actions=(t.actions||[]).map(n=>`${go(n.type)}${n.body}`).join(`
    `),e}function vo(t){return(Object.prototype.hasOwnProperty.call(t,"label")||Object.prototype.hasOwnProperty.call(t,"typeExplicitlySet")||Object.prototype.hasOwnProperty.call(t,"color")||Object.prototype.hasOwnProperty.call(t,"active")||Object.prototype.hasOwnProperty.call(t,"class"))&&(t.hasExtendedAttributes=!0),t}function Mn(t,e){return t.map(vo).filter(n=>n.statemachine).forEach(n=>{n.statemachine.states=Mn(n.statemachine.states,e)}),t.map(yo)}function bo(t){return(Object.prototype.hasOwnProperty.call(t,"type")||Object.prototype.hasOwnProperty.call(t,"color")||Object.prototype.hasOwnProperty.call(t,"class"))&&(t.hasExtendedAttributes=!0),t}function $o(t){return t.map(bo)}le.registerHelper("quotifyState",t=>ze(mo,t));le.registerHelper("quotifyLabel",t=>ze(ho,t));le.registerHelper("quotifyActions",t=>ze(po,t));Hn.exports=function(e){return le.templates["smcat.template.hbs"](V(F({},e),{states:Mn(Bn(e.states)),transitions:$o(Bn(e.transitions||[]))}))}});var Sn=X(()=>{var Xe=require("handlebars/dist/handlebars.runtime"),Lo=Xe.template,zo=Xe.templates=Xe.templates||{};zo["dot.template.hbs"]=Lo({1:function(t,e,n,d,a,r,c){var f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.hooks.blockHelperMissing,o=t.lookupProperty||function(M,N){if(Object.prototype.hasOwnProperty.call(M,N))return M[N]},h="",u=(u=o(n,"noteName")||(e!=null?o(e,"noteName"):e))!=null?u:g,k={name:"noteName",hash:{},fn:t.noop,inverse:t.program(2,a,0,r,c),data:a,loc:{start:{line:9,column:2},end:{line:26,column:15}}},$=typeof u==m?u.call(f,k):u;return($=o(n,"noteName")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"noteName")||(e!=null?o(e,"noteName"):e))!=null?u:g,k={name:"noteName",hash:{},fn:t.program(19,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:27,column:2},end:{line:37,column:15}}},$=typeof u==m?u.call(f,k):u,($=o(n,"noteName")?$:p.call(e,$,k))!=null&&(h+=$),h},2:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.hooks.blockHelperMissing,m=t.lookupProperty||function(k,$){if(Object.prototype.hasOwnProperty.call(k,$))return k[$]},p="",o=(o=m(n,"isCompositeSelf")||(e!=null?m(e,"isCompositeSelf"):e))!=null?o:c,h={name:"isCompositeSelf",hash:{},fn:t.noop,inverse:t.program(3,a,0),data:a,loc:{start:{line:10,column:4},end:{line:16,column:24}}},u=typeof o==f?o.call(r,h):o;return(u=m(n,"isCompositeSelf")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"isCompositeSelf")||(e!=null?m(e,"isCompositeSelf"):e))!=null?o:c,h={name:"isCompositeSelf",hash:{},fn:t.program(14,a,0),inverse:t.noop,data:a,loc:{start:{line:17,column:4},end:{line:25,column:24}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"isCompositeSelf")?u:g.call(e,u,h))!=null&&(p+=u),p},3:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.hooks.blockHelperMissing,m=t.lookupProperty||function(k,$){if(Object.prototype.hasOwnProperty.call(k,$))return k[$]},p='    "'+((u=typeof(o=(o=m(n,"from")||(e!=null?m(e,"from"):e))!=null?o:c)==f?o.call(r,{name:"from",hash:{},data:a,loc:{start:{line:11,column:5},end:{line:11,column:15}}}):o)!=null?u:"")+'" -> "'+((u=typeof(o=(o=m(n,"to")||(e!=null?m(e,"to"):e))!=null?o:c)==f?o.call(r,{name:"to",hash:{},data:a,loc:{start:{line:11,column:21},end:{line:11,column:29}}}):o)!=null?u:"")+'" [label="',o=(o=m(n,"label")||(e!=null?m(e,"label"):e))!=null?o:c,h={name:"label",hash:{},fn:t.noop,inverse:t.program(4,a,0),data:a,loc:{start:{line:11,column:39},end:{line:11,column:60}}},u=typeof o==f?o.call(r,h):o;return(u=m(n,"label")?u:g.call(e,u,h))!=null&&(p+=u),p+=((u=typeof(o=(o=m(n,"label")||(e!=null?m(e,"label"):e))!=null?o:c)==f?o.call(r,{name:"label",hash:{},data:a,loc:{start:{line:11,column:60},end:{line:11,column:71}}}):o)!=null?u:"")+'"',o=(o=m(n,"fromComposite")||(e!=null?m(e,"fromComposite"):e))!=null?o:c,h={name:"fromComposite",hash:{},fn:t.program(6,a,0),inverse:t.noop,data:a,loc:{start:{line:12,column:28},end:{line:12,column:92}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"fromComposite")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"toComposite")||(e!=null?m(e,"toComposite"):e))!=null?o:c,h={name:"toComposite",hash:{},fn:t.program(8,a,0),inverse:t.noop,data:a,loc:{start:{line:13,column:28},end:{line:13,column:86}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"toComposite")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"color")||(e!=null?m(e,"color"):e))!=null?o:c,h={name:"color",hash:{},fn:t.program(10,a,0),inverse:t.noop,data:a,loc:{start:{line:14,column:28},end:{line:14,column:85}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"color")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"width")||(e!=null?m(e,"width"):e))!=null?o:c,h={name:"width",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:15,column:28},end:{line:15,column:68}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"width")?u:g.call(e,u,h))!=null&&(p+=u),p+' class="'+((u=typeof(o=(o=m(n,"class")||(e!=null?m(e,"class"):e))!=null?o:c)==f?o.call(r,{name:"class",hash:{},data:a,loc:{start:{line:15,column:76},end:{line:15,column:87}}}):o)!=null?u:"")+`"]
`},4:function(t,e,n,d,a){return" "},6:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return' ltail="cluster_'+((r=typeof(r=(r=r(n,"from")||(e!=null?r(e,"from"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"from",hash:{},data:a,loc:{start:{line:12,column:63},end:{line:12,column:73}}}):r)!=null?r:"")+'"'},8:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return' lhead="cluster_'+((r=typeof(r=(r=r(n,"to")||(e!=null?r(e,"to"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"to",hash:{},data:a,loc:{start:{line:13,column:61},end:{line:13,column:69}}}):r)!=null?r:"")+'"'},10:function(t,e,n,d,a){var r=t.lambda;return' color="'+((t=r(e,e))!=null?t:"")+'" fontcolor="'+((t=r(e,e))!=null?t:"")+'"'},12:function(t,e,n,d,a){return' penwidth="'+((e=t.lambda(e,e))!=null?e:"")+'"'},14:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.hooks.blockHelperMissing,m=t.lookupProperty||function(k,$){if(Object.prototype.hasOwnProperty.call(k,$))return k[$]},p='      "'+((u=typeof(o=(o=m(n,"from")||(e!=null?m(e,"from"):e))!=null?o:c)==f?o.call(r,{name:"from",hash:{},data:a,loc:{start:{line:18,column:7},end:{line:18,column:17}}}):o)!=null?u:"")+'" -> "self_'+((u=typeof(o=(o=m(n,"name")||(e!=null?m(e,"name"):e))!=null?o:c)==f?o.call(r,{name:"name",hash:{},data:a,loc:{start:{line:18,column:28},end:{line:18,column:38}}}):o)!=null?u:"")+'" [label="',o=(o=m(n,"label")||(e!=null?m(e,"label"):e))!=null?o:c,h={name:"label",hash:{},fn:t.noop,inverse:t.program(4,a,0),data:a,loc:{start:{line:18,column:48},end:{line:18,column:69}}},u=typeof o==f?o.call(r,h):o;return(u=m(n,"label")?u:g.call(e,u,h))!=null&&(p+=u),p+=((u=typeof(o=(o=m(n,"label")||(e!=null?m(e,"label"):e))!=null?o:c)==f?o.call(r,{name:"label",hash:{},data:a,loc:{start:{line:18,column:69},end:{line:18,column:80}}}):o)!=null?u:"")+'" arrowhead=none',o=(o=m(n,"tailportflags")||(e!=null?m(e,"tailportflags"):e))!=null?o:c,h={name:"tailportflags",hash:{},fn:t.program(15,a,0),inverse:t.noop,data:a,loc:{start:{line:19,column:28},end:{line:19,column:73}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"tailportflags")?u:g.call(e,u,h))!=null&&(p+=u),p+=' ltail="cluster_'+((u=typeof(o=(o=m(n,"from")||(e!=null?m(e,"from"):e))!=null?o:c)==f?o.call(r,{name:"from",hash:{},data:a,loc:{start:{line:19,column:89},end:{line:19,column:99}}}):o)!=null?u:"")+'"',o=(o=m(n,"color")||(e!=null?m(e,"color"):e))!=null?o:c,h={name:"color",hash:{},fn:t.program(10,a,0),inverse:t.noop,data:a,loc:{start:{line:20,column:28},end:{line:20,column:85}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"color")?u:g.call(e,u,h))!=null&&(p+=u),p+=' class="'+((u=typeof(o=(o=m(n,"class")||(e!=null?m(e,"class"):e))!=null?o:c)==f?o.call(r,{name:"class",hash:{},data:a,loc:{start:{line:20,column:93},end:{line:20,column:104}}}):o)!=null?u:"")+`"]
      "self_`+((u=typeof(o=(o=m(n,"name")||(e!=null?m(e,"name"):e))!=null?o:c)==f?o.call(r,{name:"name",hash:{},data:a,loc:{start:{line:21,column:12},end:{line:21,column:22}}}):o)!=null?u:"")+'" -> "'+((u=typeof(o=(o=m(n,"from")||(e!=null?m(e,"from"):e))!=null?o:c)==f?o.call(r,{name:"from",hash:{},data:a,loc:{start:{line:21,column:28},end:{line:21,column:38}}}):o)!=null?u:"")+'" [lhead="cluster_'+((u=typeof(o=(o=m(n,"from")||(e!=null?m(e,"from"):e))!=null?o:c)==f?o.call(r,{name:"from",hash:{},data:a,loc:{start:{line:21,column:56},end:{line:21,column:66}}}):o)!=null?u:"")+'"',o=(o=m(n,"headportflags")||(e!=null?m(e,"headportflags"):e))!=null?o:c,h={name:"headportflags",hash:{},fn:t.program(15,a,0),inverse:t.noop,data:a,loc:{start:{line:22,column:28},end:{line:22,column:73}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"headportflags")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"color")||(e!=null?m(e,"color"):e))!=null?o:c,h={name:"color",hash:{},fn:t.program(17,a,0),inverse:t.noop,data:a,loc:{start:{line:23,column:28},end:{line:23,column:65}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"color")?u:g.call(e,u,h))!=null&&(p+=u),o=(o=m(n,"width")||(e!=null?m(e,"width"):e))!=null?o:c,h={name:"width",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:24,column:28},end:{line:24,column:68}}},u=typeof o==f?o.call(r,h):o,(u=m(n,"width")?u:g.call(e,u,h))!=null&&(p+=u),p+' class="'+((u=typeof(o=(o=m(n,"class")||(e!=null?m(e,"class"):e))!=null?o:c)==f?o.call(r,{name:"class",hash:{},data:a,loc:{start:{line:24,column:76},end:{line:24,column:87}}}):o)!=null?u:"")+`"]
`},15:function(t,e,n,d,a){return" "+((e=t.lambda(e,e))!=null?e:"")},17:function(t,e,n,d,a){return' color="'+((e=t.lambda(e,e))!=null?e:"")+'"'},19:function(t,e,n,d,a,r,c){var f,g=t.lambda,m=t.hooks.blockHelperMissing,p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return'      "i_'+((f=g(e,e))!=null?f:"")+`" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]
      "`+((f=g(c[1]!=null?p(c[1],"from"):c[1],e))!=null?f:"")+'" -> "i_'+((f=g(e,e))!=null?f:"")+'" [arrowhead=none'+((f=m.call(e,g(c[1]!=null?p(c[1],"fromComposite"):c[1],e),{name:"../fromComposite",hash:{},fn:t.program(20,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:30,column:32},end:{line:30,column:105}}}))!=null?f:"")+((f=m.call(e,g(c[1]!=null?p(c[1],"color"):c[1],e),{name:"../color",hash:{},fn:t.program(17,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:31,column:32},end:{line:31,column:75}}}))!=null?f:"")+`]
      "i_`+((f=g(e,e))!=null?f:"")+'" -> "'+((f=g(c[1]!=null?p(c[1],"to"):c[1],e))!=null?f:"")+'" [label="'+((f=m.call(e,g(c[1]!=null?p(c[1],"label"):c[1],e),{name:"../label",hash:{},fn:t.noop,inverse:t.program(4,a,0,r,c),data:a,loc:{start:{line:32,column:43},end:{line:32,column:70}}}))!=null?f:"")+((f=g(c[1]!=null?p(c[1],"label"):c[1],e))!=null?f:"")+'"'+((f=m.call(e,g(c[1]!=null?p(c[1],"toComposite"):c[1],e),{name:"../toComposite",hash:{},fn:t.program(22,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:33,column:32},end:{line:33,column:99}}}))!=null?f:"")+((f=m.call(e,g(c[1]!=null?p(c[1],"color"):c[1],e),{name:"../color",hash:{},fn:t.program(10,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:34,column:32},end:{line:34,column:95}}}))!=null?f:"")+`]
      "i_`+((f=g(e,e))!=null?f:"")+'" -> "'+((f=g(e,e))!=null?f:"")+`" [style=dashed arrowtail=none arrowhead=none weight=0]
      "`+((f=g(e,e))!=null?f:"")+'" [label="'+((f=g(c[1]!=null?p(c[1],"noteFlattened"):c[1],e))!=null?f:"")+`" shape=note fontsize=10 color=black fontcolor=black fillcolor="#ffffcc" penwidth=1.0]
`},20:function(t,e,n,d,a,r,c){var f=t.lookupProperty||function(g,m){if(Object.prototype.hasOwnProperty.call(g,m))return g[m]};return' ltail="cluster_'+((e=t.lambda(c[1]!=null?f(c[1],"from"):c[1],e))!=null?e:"")+'"'},22:function(t,e,n,d,a,r,c){var f=t.lookupProperty||function(g,m){if(Object.prototype.hasOwnProperty.call(g,m))return g[m]};return' lhead="cluster_'+((e=t.lambda(c[1]!=null?f(c[1],"to"):c[1],e))!=null?e:"")+'"'},compiler:[8,">= 4.3.0"],main:function(t,e,n,o,u,r,c){var f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.lookupProperty||function($,M){if(Object.prototype.hasOwnProperty.call($,M))return $[M]},o=`digraph "state transitions" {
  `+((k=typeof(h=(h=p(n,"graphAttributes")||(e!=null?p(e,"graphAttributes"):e))!=null?h:g)==m?h.call(f,{name:"graphAttributes",hash:{},data:u,loc:{start:{line:2,column:2},end:{line:2,column:23}}}):h)!=null?k:"")+`
  node [`+((k=typeof(h=(h=p(n,"nodeAttributes")||(e!=null?p(e,"nodeAttributes"):e))!=null?h:g)==m?h.call(f,{name:"nodeAttributes",hash:{},data:u,loc:{start:{line:3,column:8},end:{line:3,column:28}}}):h)!=null?k:"")+`]
  edge [`+((k=typeof(h=(h=p(n,"edgeAttributes")||(e!=null?p(e,"edgeAttributes"):e))!=null?h:g)==m?h.call(f,{name:"edgeAttributes",hash:{},data:u,loc:{start:{line:4,column:8},end:{line:4,column:28}}}):h)!=null?k:"")+`]

`+((k=t.invokePartial(p(o,"dot.states.template.hbs"),e,{name:"dot.states.template.hbs",data:u,indent:"  ",helpers:n,partials:o,decorators:t.decorators}))!=null?k:"")+`
`,h=(h=p(n,"transitions")||(e!=null?p(e,"transitions"):e))!=null?h:g,u={name:"transitions",hash:{},fn:t.program(1,u,0,r,c),inverse:t.noop,data:u,loc:{start:{line:8,column:2},end:{line:38,column:18}}},k=typeof h==m?h.call(f,u):h;return(k=p(n,"transitions")?k:t.hooks.blockHelperMissing.call(e,k,u))!=null&&(o+=k),o+`}
`},usePartial:!0,useData:!0,useDepths:!0})});var Vn=X(()=>{var Je=require("handlebars/dist/handlebars.runtime"),Uo=Je.template,Go=Je.templates=Je.templates||{};Go["dot.states.template.hbs"]=Uo({1:function(t,e,n,d,f){var r=t.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]},c="",g=(g=r(n,"nestedExternalSelfTransitions")||(e!=null?r(e,"nestedExternalSelfTransitions"):e))!=null?g:t.hooks.helperMissing,f={name:"nestedExternalSelfTransitions",hash:{},fn:t.program(2,f,0),inverse:t.noop,data:f,loc:{start:{line:2,column:2},end:{line:4,column:36}}},g=typeof g=="function"?g.call(e!=null?e:t.nullContext||{},f):g;return(g=r(n,"nestedExternalSelfTransitions")?g:t.hooks.blockHelperMissing.call(e,g,f))!=null&&(c+=g),c},2:function(t,e,n,d,a){return'  "self_'+((e=t.lambda(e,e))!=null?e:"")+`" [shape=point style=invis width=0 height=0 fixedsize=true]
`},4:function(t,e,n,d,a){var r,c,f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return'  "'+((r=typeof(c=(c=p(n,"name")||(e!=null?p(e,"name"):e))!=null?c:g)==m?c.call(f,{name:"name",hash:{},data:a,loc:{start:{line:7,column:3},end:{line:7,column:13}}}):c)!=null?r:"")+'" [shape=circle style=filled class="'+((r=typeof(c=(c=p(n,"class")||(e!=null?p(e,"class"):e))!=null?c:g)==m?c.call(f,{name:"class",hash:{},data:a,loc:{start:{line:7,column:49},end:{line:7,column:60}}}):c)!=null?r:"")+'" '+((r=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(5,a,0),inverse:t.program(7,a,0),data:a,loc:{start:{line:7,column:62},end:{line:7,column:150}}}))!=null?r:"")+((r=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:7,column:150},end:{line:7,column:184}}}))!=null?r:"")+`fixedsize=true height=0.15 label=""]
`},5:function(t,e,n,d,a){var r,c=e!=null?e:t.nullContext||{},f=t.hooks.helperMissing,g="function",m=t.lookupProperty||function(p,o){if(Object.prototype.hasOwnProperty.call(p,o))return p[o]};return'color="'+((t=typeof(r=(r=m(n,"color")||(e!=null?m(e,"color"):e))!=null?r:f)==g?r.call(c,{name:"color",hash:{},data:a,loc:{start:{line:7,column:82},end:{line:7,column:93}}}):r)!=null?t:"")+'" fillcolor="'+((t=typeof(r=(r=m(n,"color")||(e!=null?m(e,"color"):e))!=null?r:f)==g?r.call(c,{name:"color",hash:{},data:a,loc:{start:{line:7,column:106},end:{line:7,column:117}}}):r)!=null?t:"")+'" '},7:function(t,e,n,d,a){return"fillcolor=black "},9:function(t,e,n,d,a){return"penwidth=3.0 "},11:function(t,e,n,d,o){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.lookupProperty||function(u,k){if(Object.prototype.hasOwnProperty.call(u,k))return u[k]},m='  "'+((h=typeof(p=(p=g(n,"name")||(e!=null?g(e,"name"):e))!=null?p:c)==f?p.call(r,{name:"name",hash:{},data:o,loc:{start:{line:10,column:3},end:{line:10,column:13}}}):p)!=null?h:"")+'" [margin=0 class="'+((h=typeof(p=(p=g(n,"class")||(e!=null?g(e,"class"):e))!=null?p:c)==f?p.call(r,{name:"class",hash:{},data:o,loc:{start:{line:10,column:32},end:{line:10,column:43}}}):p)!=null?h:"")+'" '+((h=g(n,"if").call(r,e!=null?g(e,"color"):e,{name:"if",hash:{},fn:t.program(12,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:45},end:{line:10,column:85}}}))!=null?h:"")+((h=g(n,"if").call(r,e!=null?g(e,"active"):e,{name:"if",hash:{},fn:t.program(14,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:85},end:{line:10,column:134}}}))!=null?h:"")+`label= < 
    <table align="center" cellborder="0" border="2" style="rounded" width="48">
      <tr><td width="48"`+((h=g(n,"if").call(r,e!=null?g(e,"actions"):e,{name:"if",hash:{},fn:t.program(16,o,0),inverse:t.program(18,o,0),data:o,loc:{start:{line:12,column:24},end:{line:12,column:86}}}))!=null?h:"")+">"+((h=g(n,"if").call(r,e!=null?g(e,"active"):e,{name:"if",hash:{},fn:t.program(20,o,0),inverse:t.program(22,o,0),data:o,loc:{start:{line:12,column:87},end:{line:12,column:141}}}))!=null?h:"")+`</td></tr>
`,p=(p=g(n,"actions")||(e!=null?g(e,"actions"):e))!=null?p:c,o={name:"actions",hash:{},fn:t.program(24,o,0),inverse:t.noop,data:o,loc:{start:{line:13,column:6},end:{line:16,column:18}}},h=typeof p==f?p.call(r,o):p;return(h=g(n,"actions")?h:t.hooks.blockHelperMissing.call(e,h,o))!=null&&(m+=h),m+`    </table>
  >]
`},12:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return'color="'+((r=typeof(r=(r=r(n,"color")||(e!=null?r(e,"color"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"color",hash:{},data:a,loc:{start:{line:10,column:65},end:{line:10,column:76}}}):r)!=null?r:"")+'" '},14:function(t,e,n,d,a){return"peripheries=1 style=rounded "},16:function(t,e,n,d,a){return' cellpadding="2"'},18:function(t,e,n,d,a){return' cellpadding="7"'},20:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return"<i>"+t.escapeExpression(typeof(r=(r=r(n,"label")||(e!=null?r(e,"label"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"label",hash:{},data:a,loc:{start:{line:12,column:104},end:{line:12,column:113}}}):r)+"</i>"},22:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return t.escapeExpression(typeof(r=(r=r(n,"label")||(e!=null?r(e,"label"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"label",hash:{},data:a,loc:{start:{line:12,column:125},end:{line:12,column:134}}}):r)},24:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return"        "+((a=r(n,"if").call(e!=null?e:t.nullContext||{},a&&r(a,"first"),{name:"if",hash:{},fn:t.program(25,a,0),inverse:t.noop,data:a,loc:{start:{line:14,column:8},end:{line:14,column:34}}}))!=null?a:"")+`
        <tr><td align="left" cellpadding="2">`+t.escapeExpression(t.lambda(e,e))+`</td></tr>
`},25:function(t,e,n,d,a){return"<hr/>"},27:function(t,e,n,d,a){var r,c,f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return'  "'+((r=typeof(c=(c=p(n,"name")||(e!=null?p(e,"name"):e))!=null?c:g)==m?c.call(f,{name:"name",hash:{},data:a,loc:{start:{line:21,column:3},end:{line:21,column:13}}}):c)!=null?r:"")+'" [shape=circle class="'+((r=typeof(c=(c=p(n,"class")||(e!=null?p(e,"class"):e))!=null?c:g)==m?c.call(f,{name:"class",hash:{},data:a,loc:{start:{line:21,column:36},end:{line:21,column:47}}}):c)!=null?r:"")+'" '+((r=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:21,column:49},end:{line:21,column:89}}}))!=null?r:"")+((r=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:21,column:89},end:{line:21,column:123}}}))!=null?r:"")+`label="H"]
`},29:function(t,e,n,d,a){var r,c,f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return'  "'+((r=typeof(c=(c=p(n,"name")||(e!=null?p(e,"name"):e))!=null?c:g)==m?c.call(f,{name:"name",hash:{},data:a,loc:{start:{line:24,column:3},end:{line:24,column:13}}}):c)!=null?r:"")+'" [shape=circle class="'+((r=typeof(c=(c=p(n,"class")||(e!=null?p(e,"class"):e))!=null?c:g)==m?c.call(f,{name:"class",hash:{},data:a,loc:{start:{line:24,column:36},end:{line:24,column:47}}}):c)!=null?r:"")+'" '+((r=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:24,column:49},end:{line:24,column:89}}}))!=null?r:"")+((r=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:24,column:89},end:{line:24,column:123}}}))!=null?r:"")+`label="H*"]
`},31:function(t,e,n,d,a,r,c){var f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.hooks.blockHelperMissing,o=t.lookupProperty||function(M,N){if(Object.prototype.hasOwnProperty.call(M,N))return M[N]},h='  "'+(($=typeof(u=(u=o(n,"name")||(e!=null?o(e,"name"):e))!=null?u:g)==m?u.call(f,{name:"name",hash:{},data:a,loc:{start:{line:27,column:3},end:{line:27,column:13}}}):u)!=null?$:"")+'" [shape=diamond fixedsize=true width=0.35 height=0.35 fontsize=10 class="'+(($=typeof(u=(u=o(n,"class")||(e!=null?o(e,"class"):e))!=null?u:g)==m?u.call(f,{name:"class",hash:{},data:a,loc:{start:{line:27,column:87},end:{line:27,column:98}}}):u)!=null?$:"")+'" '+(($=o(n,"if").call(f,e!=null?o(e,"color"):e,{name:"if",hash:{},fn:t.program(12,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:27,column:100},end:{line:27,column:140}}}))!=null?$:"")+(($=o(n,"if").call(f,e!=null?o(e,"active"):e,{name:"if",hash:{},fn:t.program(9,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:27,column:140},end:{line:27,column:174}}}))!=null?$:"")+`label=" "]
  "`+(($=typeof(u=(u=o(n,"name")||(e!=null?o(e,"name"):e))!=null?u:g)==m?u.call(f,{name:"name",hash:{},data:a,loc:{start:{line:28,column:3},end:{line:28,column:13}}}):u)!=null?$:"")+'" -> "'+(($=typeof(u=(u=o(n,"name")||(e!=null?o(e,"name"):e))!=null?u:g)==m?u.call(f,{name:"name",hash:{},data:a,loc:{start:{line:28,column:19},end:{line:28,column:29}}}):u)!=null?$:"")+'" [label=<',u=(u=o(n,"actions")||(e!=null?o(e,"actions"):e))!=null?u:g,k={name:"actions",hash:{},fn:t.program(32,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:28,column:39},end:{line:28,column:144}}},$=typeof u==m?u.call(f,k):u;return($=o(n,"actions")?$:p.call(e,$,k))!=null&&(h+=$),h+='> color="#FFFFFF01"',u=(u=o(n,"color")||(e!=null?o(e,"color"):e))!=null?u:g,k={name:"color",hash:{},fn:t.program(41,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:28,column:163},end:{line:28,column:203}}},$=typeof u==m?u.call(f,k):u,($=o(n,"color")?$:p.call(e,$,k))!=null&&(h+=$),h+' class="'+(($=typeof(u=(u=o(n,"class")||(e!=null?o(e,"class"):e))!=null?u:g)==m?u.call(f,{name:"class",hash:{},data:a,loc:{start:{line:28,column:211},end:{line:28,column:222}}}):u)!=null?$:"")+`"];
`},32:function(t,e,n,d,a,r,c){var f=e!=null?e:t.nullContext||{},g=t.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return((e=g(n,"if").call(f,a&&g(a,"first"),{name:"if",hash:{},fn:t.program(33,a,0,r,c),inverse:t.program(35,a,0,r,c),data:a,loc:{start:{line:28,column:51},end:{line:28,column:82}}}))!=null?e:"")+((e=g(n,"if").call(f,c[1]!=null?g(c[1],"active"):c[1],{name:"if",hash:{},fn:t.program(37,a,0,r,c),inverse:t.program(39,a,0,r,c),data:a,loc:{start:{line:28,column:82},end:{line:28,column:131}}}))!=null?e:"")},33:function(t,e,n,d,a){return""},35:function(t,e,n,d,a){return"\\n"},37:function(t,e,n,d,a){return"<i>"+t.escapeExpression(t.lambda(e,e))+"</i>"},39:function(t,e,n,d,a){return t.escapeExpression(t.lambda(e,e))},41:function(t,e,n,d,a){return' fontcolor="'+((e=t.lambda(e,e))!=null?e:"")+'"'},43:function(t,e,n,d,a){var r,c,f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return'  "'+((r=typeof(c=(c=p(n,"name")||(e!=null?p(e,"name"):e))!=null?c:g)==m?c.call(f,{name:"name",hash:{},data:a,loc:{start:{line:31,column:3},end:{line:31,column:13}}}):c)!=null?r:"")+'" [shape=rect class="'+((r=typeof(c=(c=p(n,"class")||(e!=null?p(e,"class"):e))!=null?c:g)==m?c.call(f,{name:"class",hash:{},data:a,loc:{start:{line:31,column:34},end:{line:31,column:45}}}):c)!=null?r:"")+'" '+((r=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(5,a,0),inverse:t.program(7,a,0),data:a,loc:{start:{line:31,column:47},end:{line:31,column:135}}}))!=null?r:"")+((r=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:31,column:135},end:{line:31,column:169}}}))!=null?r:"")+'label=" " fixedsize=true style=filled '+((r=typeof(c=(c=p(n,"sizingExtras")||(e!=null?p(e,"sizingExtras"):e))!=null?c:g)==m?c.call(f,{name:"sizingExtras",hash:{},data:a,loc:{start:{line:31,column:207},end:{line:31,column:225}}}):c)!=null?r:"")+`]
`},45:function(t,e,n,d,a){var r,c,f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return'  "'+((r=typeof(c=(c=p(n,"name")||(e!=null?p(e,"name"):e))!=null?c:g)==m?c.call(f,{name:"name",hash:{},data:a,loc:{start:{line:37,column:3},end:{line:37,column:13}}}):c)!=null?r:"")+`" [label= < 
      <table align="center" cellborder="0" border="0">
        <tr><td cellpadding="0"><font `+((r=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:39,column:38},end:{line:39,column:78}}}))!=null?r:"")+`point-size="20">X</font></td></tr>
        <tr><td cellpadding="0"><font `+((r=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(46,a,0),inverse:t.noop,data:a,loc:{start:{line:40,column:38},end:{line:40,column:77}}}))!=null?r:"")+">"+t.escapeExpression(typeof(c=(c=p(n,"label")||(e!=null?p(e,"label"):e))!=null?c:g)==m?c.call(f,{name:"label",hash:{},data:a,loc:{start:{line:40,column:78},end:{line:40,column:87}}}):c)+`</font></td></tr>
      </table>
    > class="`+((r=typeof(c=(c=p(n,"class")||(e!=null?p(e,"class"):e))!=null?c:g)==m?c.call(f,{name:"class",hash:{},data:a,loc:{start:{line:42,column:13},end:{line:42,column:24}}}):c)!=null?r:"")+`"]
`},46:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return'color="'+((r=typeof(r=(r=r(n,"color")||(e!=null?r(e,"color"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"color",hash:{},data:a,loc:{start:{line:40,column:58},end:{line:40,column:69}}}):r)!=null?r:"")+'"'},48:function(t,e,n,d,a){var r,c,f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return'  "'+((r=typeof(c=(c=p(n,"name")||(e!=null?p(e,"name"):e))!=null?c:g)==m?c.call(f,{name:"name",hash:{},data:a,loc:{start:{line:45,column:3},end:{line:45,column:13}}}):c)!=null?r:"")+'" [shape=circle style=filled class="'+((r=typeof(c=(c=p(n,"class")||(e!=null?p(e,"class"):e))!=null?c:g)==m?c.call(f,{name:"class",hash:{},data:a,loc:{start:{line:45,column:49},end:{line:45,column:60}}}):c)!=null?r:"")+'" '+((r=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(5,a,0),inverse:t.program(7,a,0),data:a,loc:{start:{line:45,column:62},end:{line:45,column:150}}}))!=null?r:"")+"fixedsize=true height=0.15 peripheries=2 "+((r=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:45,column:191},end:{line:45,column:225}}}))!=null?r:"")+`label=""]
`},50:function(t,e,n,d,a){var r=e!=null?e:t.nullContext||{},c=t.hooks.helperMissing,f="function",g=t.lookupProperty||function(u,k){if(Object.prototype.hasOwnProperty.call(u,k))return u[k]},m='  subgraph "cluster_'+((h=typeof(p=(p=g(n,"name")||(e!=null?g(e,"name"):e))!=null?p:c)==f?p.call(r,{name:"name",hash:{},data:a,loc:{start:{line:48,column:20},end:{line:48,column:30}}}):p)!=null?h:"")+`" {
    class="`+((h=typeof(p=(p=g(n,"class")||(e!=null?g(e,"class"):e))!=null?p:c)==f?p.call(r,{name:"class",hash:{},data:a,loc:{start:{line:49,column:11},end:{line:49,column:22}}}):p)!=null?h:"")+'" '+((h=g(n,"if").call(r,e!=null?g(e,"color"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:49,column:24},end:{line:49,column:64}}}))!=null?h:"")+`label= <
    <table cellborder="0" border="0">
      <tr><td>`+((h=g(n,"if").call(r,e!=null?g(e,"active"):e,{name:"if",hash:{},fn:t.program(20,a,0),inverse:t.program(22,a,0),data:a,loc:{start:{line:51,column:14},end:{line:51,column:68}}}))!=null?h:"")+`</td></tr>
`,p=(p=g(n,"actions")||(e!=null?g(e,"actions"):e))!=null?p:c,o={name:"actions",hash:{},fn:t.program(51,a,0),inverse:t.noop,data:a,loc:{start:{line:52,column:6},end:{line:55,column:18}}},h=typeof p==f?p.call(r,o):p;return(h=g(n,"actions")?h:t.hooks.blockHelperMissing.call(e,h,o))!=null&&(m+=h),m+`    </table>
    > `+((h=g(n,"if").call(r,e!=null?g(e,"parentIsParallel"):e,{name:"if",hash:{},fn:t.program(53,a,0),inverse:t.program(55,a,0),data:a,loc:{start:{line:57,column:6},end:{line:57,column:137}}}))!=null?h:"")+`
    "`+((h=typeof(p=(p=g(n,"name")||(e!=null?g(e,"name"):e))!=null?p:c)==f?p.call(r,{name:"name",hash:{},data:a,loc:{start:{line:58,column:5},end:{line:58,column:15}}}):p)!=null?h:"")+`" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]
    `+((h=(g(n,"stateSection")||e&&g(e,"stateSection")||c).call(r,e!=null?g(e,"statemachine"):e,{name:"stateSection",hash:{},fn:t.program(33,a,0),inverse:t.noop,data:a,loc:{start:{line:59,column:4},end:{line:59,column:51}}}))!=null?h:"")+`
  }
`},51:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return"        "+((a=r(n,"if").call(e!=null?e:t.nullContext||{},a&&r(a,"first"),{name:"if",hash:{},fn:t.program(25,a,0),inverse:t.noop,data:a,loc:{start:{line:53,column:8},end:{line:53,column:34}}}))!=null?a:"")+`
        <tr><td align="left">`+t.escapeExpression(t.lambda(e,e))+`</td></tr>
`},53:function(t,e,n,d,a){return'style="dashed" penwidth=1'},55:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return"style=rounded "+((a=r(n,"if").call(e!=null?e:t.nullContext||{},e!=null?r(e,"active"):e,{name:"if",hash:{},fn:t.program(56,a,0),inverse:t.program(58,a,0),data:a,loc:{start:{line:57,column:77},end:{line:57,column:130}}}))!=null?a:"")},56:function(t,e,n,d,a){return"penwidth=3.0"},58:function(t,e,n,d,a){return"penwidth=2.0"},60:function(t,e,n,d,m,r,c){var f=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]},g="",p=(p=f(n,"noteName")||(e!=null?f(e,"noteName"):e))!=null?p:t.hooks.helperMissing,m={name:"noteName",hash:{},fn:t.program(61,m,0,r,c),inverse:t.noop,data:m,loc:{start:{line:63,column:4},end:{line:66,column:17}}},p=typeof p=="function"?p.call(e!=null?e:t.nullContext||{},m):p;return(p=f(n,"noteName")?p:t.hooks.blockHelperMissing.call(e,p,m))!=null&&(g+=p),g},61:function(t,e,n,d,a,r,c){var f=t.lambda,g=t.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return'    "'+((t=f(e,e))!=null?t:"")+'" [color=black fontcolor=black label="'+((t=f(c[1]!=null?g(c[1],"noteFlattened"):c[1],e))!=null?t:"")+`" shape=note fontsize=10 fillcolor="#ffffcc" penwidth=1.0]
    "`+((t=f(c[1]!=null?g(c[1],"name"):c[1],e))!=null?t:"")+'" -> "'+((t=f(e,e))!=null?t:"")+`" [style=dashed arrowtail=none arrowhead=none]
`},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,a,r,c){var f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.hooks.blockHelperMissing,o=t.lookupProperty||function(M,N){if(Object.prototype.hasOwnProperty.call(M,N))return M[N]},h="",u=(u=o(n,"compositeStates")||(e!=null?o(e,"compositeStates"):e))!=null?u:g,k={name:"compositeStates",hash:{},fn:t.program(1,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:1,column:0},end:{line:5,column:20}}},$=typeof u==m?u.call(f,k):u;return($=o(n,"compositeStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"initialStates")||(e!=null?o(e,"initialStates"):e))!=null?u:g,k={name:"initialStates",hash:{},fn:t.program(4,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:6,column:0},end:{line:8,column:18}}},$=typeof u==m?u.call(f,k):u,($=o(n,"initialStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"regularStates")||(e!=null?o(e,"regularStates"):e))!=null?u:g,k={name:"regularStates",hash:{},fn:t.program(11,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:9,column:0},end:{line:19,column:18}}},$=typeof u==m?u.call(f,k):u,($=o(n,"regularStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"historyStates")||(e!=null?o(e,"historyStates"):e))!=null?u:g,k={name:"historyStates",hash:{},fn:t.program(27,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:20,column:0},end:{line:22,column:18}}},$=typeof u==m?u.call(f,k):u,($=o(n,"historyStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"deepHistoryStates")||(e!=null?o(e,"deepHistoryStates"):e))!=null?u:g,k={name:"deepHistoryStates",hash:{},fn:t.program(29,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:23,column:0},end:{line:25,column:22}}},$=typeof u==m?u.call(f,k):u,($=o(n,"deepHistoryStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"choiceStates")||(e!=null?o(e,"choiceStates"):e))!=null?u:g,k={name:"choiceStates",hash:{},fn:t.program(31,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:26,column:0},end:{line:29,column:17}}},$=typeof u==m?u.call(f,k):u,($=o(n,"choiceStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"forkjoinStates")||(e!=null?o(e,"forkjoinStates"):e))!=null?u:g,k={name:"forkjoinStates",hash:{},fn:t.program(43,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:30,column:0},end:{line:32,column:19}}},$=typeof u==m?u.call(f,k):u,($=o(n,"forkjoinStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"junctionStates")||(e!=null?o(e,"junctionStates"):e))!=null?u:g,k={name:"junctionStates",hash:{},fn:t.program(4,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:33,column:0},end:{line:35,column:19}}},$=typeof u==m?u.call(f,k):u,($=o(n,"junctionStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"terminateStates")||(e!=null?o(e,"terminateStates"):e))!=null?u:g,k={name:"terminateStates",hash:{},fn:t.program(45,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:36,column:0},end:{line:43,column:20}}},$=typeof u==m?u.call(f,k):u,($=o(n,"terminateStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"finalStates")||(e!=null?o(e,"finalStates"):e))!=null?u:g,k={name:"finalStates",hash:{},fn:t.program(48,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:44,column:0},end:{line:46,column:16}}},$=typeof u==m?u.call(f,k):u,($=o(n,"finalStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"compositeStates")||(e!=null?o(e,"compositeStates"):e))!=null?u:g,k={name:"compositeStates",hash:{},fn:t.program(50,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:47,column:0},end:{line:61,column:20}}},$=typeof u==m?u.call(f,k):u,($=o(n,"compositeStates")?$:p.call(e,$,k))!=null&&(h+=$),u=(u=o(n,"states")||(e!=null?o(e,"states"):e))!=null?u:g,k={name:"states",hash:{},fn:t.program(60,a,0,r,c),inverse:t.noop,data:a,loc:{start:{line:62,column:0},end:{line:67,column:11}}},$=typeof u==m?u.call(f,k):u,($=o(n,"states")?$:p.call(e,$,k))!=null&&(h+=$),h},useData:!0,useDepths:!0})});var Ln=X((ps,Dn)=>{var de=require("handlebars/dist/handlebars.runtime.js");Sn();Vn();de.registerPartial("dot.states.template.hbs",de.templates["dot.states.template.hbs"]);de.registerHelper("stateSection",t=>de.templates["dot.states.template.hbs"](Jo(t)));function J(t){return e=>e.type===t}function Xo(t){return e=>t.includes(e.type)}function Jo(t){return t.initialStates=t.states.filter(J("initial")),t.regularStates=t.states.filter(e=>J("regular")(e)&&!e.statemachine),t.historyStates=t.states.filter(J("history")),t.deepHistoryStates=t.states.filter(J("deephistory")),t.choiceStates=t.states.filter(J("choice")),t.forkjoinStates=t.states.filter(Xo(["fork","join","forkjoin"])),t.junctionStates=t.states.filter(J("junction")),t.terminateStates=t.states.filter(J("terminate")),t.finalStates=t.states.filter(J("final")),t.compositeStates=t.states.filter(e=>e.statemachine),t}Dn.exports=function(e){return de.templates["dot.template.hbs"](e)}});var Zn=X(()=>{var Ye=require("handlebars/dist/handlebars.runtime"),bi=Ye.template,$i=Ye.templates=Ye.templates||{};$i["scxml.template.hbs"]=bi({1:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return'initial="'+t.escapeExpression(typeof(r=(r=r(n,"initial")||(e!=null?r(e,"initial"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"initial",hash:{},data:a,loc:{start:{line:2,column:71},end:{line:2,column:82}}}):r)+'" '},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,a){var r,c=t.lookupProperty||function(f,g){if(Object.prototype.hasOwnProperty.call(f,g))return f[g]};return`<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" `+((r=c(n,"if").call(e!=null?e:t.nullContext||{},e!=null?c(e,"initial"):e,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:2,column:47},end:{line:2,column:91}}}))!=null?r:"")+`version="1.0">
`+((r=t.invokePartial(c(d,"scxml.states.template.hbs"),e,{name:"scxml.states.template.hbs",data:a,helpers:n,partials:d,decorators:t.decorators}))!=null?r:"")+`</scxml>
`},usePartial:!0,useData:!0})});var Kn=X(()=>{var Ze=require("handlebars/dist/handlebars.runtime"),xi=Ze.template,ki=Ze.templates=Ze.templates||{};ki["scxml.states.template.hbs"]=xi({1:function(t,e,n,d,a){var r,c,f=e!=null?e:t.nullContext||{},g=t.hooks.helperMissing,m="function",p=t.escapeExpression,o=t.lookupProperty||function(h,u){if(Object.prototype.hasOwnProperty.call(h,u))return h[u]};return"    <"+p(typeof(c=(c=o(n,"kind")||(e!=null?o(e,"kind"):e))!=null?c:g)==m?c.call(f,{name:"kind",hash:{},data:a,loc:{start:{line:2,column:5},end:{line:2,column:13}}}):c)+' id="'+p(typeof(c=(c=o(n,"id")||(e!=null?o(e,"id"):e))!=null?c:g)==m?c.call(f,{name:"id",hash:{},data:a,loc:{start:{line:2,column:18},end:{line:2,column:24}}}):c)+'"'+((r=o(n,"if").call(f,e!=null?o(e,"initial"):e,{name:"if",hash:{},fn:t.program(2,a,0),inverse:t.noop,data:a,loc:{start:{line:2,column:25},end:{line:2,column:69}}}))!=null?r:"")+((r=o(n,"if").call(f,e!=null?o(e,"type"):e,{name:"if",hash:{},fn:t.program(4,a,0),inverse:t.noop,data:a,loc:{start:{line:2,column:69},end:{line:2,column:104}}}))!=null?r:"")+`>
`+((r=t.invokePartial(o(d,"scxml.states.template.hbs"),e,{name:"scxml.states.template.hbs",data:a,indent:"    ",helpers:n,partials:d,decorators:t.decorators}))!=null?r:"")+((r=o(n,"each").call(f,e!=null?o(e,"onentries"):e,{name:"each",hash:{},fn:t.program(6,a,0),inverse:t.noop,data:a,loc:{start:{line:4,column:4},end:{line:6,column:13}}}))!=null?r:"")+((r=o(n,"each").call(f,e!=null?o(e,"onexits"):e,{name:"each",hash:{},fn:t.program(8,a,0),inverse:t.noop,data:a,loc:{start:{line:7,column:4},end:{line:9,column:13}}}))!=null?r:"")+((r=o(n,"each").call(f,e!=null?o(e,"transitions"):e,{name:"each",hash:{},fn:t.program(10,a,0),inverse:t.noop,data:a,loc:{start:{line:10,column:4},end:{line:18,column:13}}}))!=null?r:"")+"    </"+p(typeof(c=(c=o(n,"kind")||(e!=null?o(e,"kind"):e))!=null?c:g)==m?c.call(f,{name:"kind",hash:{},data:a,loc:{start:{line:19,column:6},end:{line:19,column:14}}}):c)+`>
`},2:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return' initial="'+t.escapeExpression(typeof(r=(r=r(n,"initial")||(e!=null?r(e,"initial"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"initial",hash:{},data:a,loc:{start:{line:2,column:50},end:{line:2,column:61}}}):r)+'"'},4:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return' type="'+t.escapeExpression(typeof(r=(r=r(n,"type")||(e!=null?r(e,"type"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"type",hash:{},data:a,loc:{start:{line:2,column:88},end:{line:2,column:96}}}):r)+'"'},6:function(t,e,n,d,a){return"        <onentry>"+t.escapeExpression(t.lambda(e,e))+`</onentry>
`},8:function(t,e,n,d,a){return"        <onexit>"+t.escapeExpression(t.lambda(e,e))+`</onexit>
`},10:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return(a=r(n,"if").call(e!=null?e:t.nullContext||{},e!=null?r(e,"action"):e,{name:"if",hash:{},fn:t.program(11,a,0),inverse:t.program(18,a,0),data:a,loc:{start:{line:11,column:8},end:{line:17,column:15}}}))!=null?a:""},11:function(t,e,n,d,a){var r,c=e!=null?e:t.nullContext||{},f=t.hooks.helperMissing,g="function",m=t.escapeExpression,p=t.lookupProperty||function(o,h){if(Object.prototype.hasOwnProperty.call(o,h))return o[h]};return"        <transition "+((r=p(n,"if").call(c,e!=null?p(e,"event"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:12,column:20},end:{line:12,column:58}}}))!=null?r:"")+((r=p(n,"if").call(c,e!=null?p(e,"cond"):e,{name:"if",hash:{},fn:t.program(14,a,0),inverse:t.noop,data:a,loc:{start:{line:12,column:58},end:{line:12,column:93}}}))!=null?r:"")+((r=p(n,"if").call(c,e!=null?p(e,"type"):e,{name:"if",hash:{},fn:t.program(16,a,0),inverse:t.noop,data:a,loc:{start:{line:12,column:93},end:{line:12,column:128}}}))!=null?r:"")+'target="'+m(typeof(r=(r=p(n,"target")||(e!=null?p(e,"target"):e))!=null?r:f)==g?r.call(c,{name:"target",hash:{},data:a,loc:{start:{line:12,column:136},end:{line:12,column:146}}}):r)+`">
            `+m(typeof(r=(r=p(n,"action")||(e!=null?p(e,"action"):e))!=null?r:f)==g?r.call(c,{name:"action",hash:{},data:a,loc:{start:{line:13,column:12},end:{line:13,column:22}}}):r)+`
        </transition>
`},12:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return'event="'+t.escapeExpression(typeof(r=(r=r(n,"event")||(e!=null?r(e,"event"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"event",hash:{},data:a,loc:{start:{line:12,column:40},end:{line:12,column:49}}}):r)+'" '},14:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return'cond="'+t.escapeExpression(typeof(r=(r=r(n,"cond")||(e!=null?r(e,"cond"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"cond",hash:{},data:a,loc:{start:{line:12,column:76},end:{line:12,column:84}}}):r)+'" '},16:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return'type="'+t.escapeExpression(typeof(r=(r=r(n,"type")||(e!=null?r(e,"type"):e))!=null?r:t.hooks.helperMissing)=="function"?r.call(e!=null?e:t.nullContext||{},{name:"type",hash:{},data:a,loc:{start:{line:12,column:111},end:{line:12,column:119}}}):r)+'" '},18:function(t,e,n,d,a){var r,c=e!=null?e:t.nullContext||{},f=t.lookupProperty||function(g,m){if(Object.prototype.hasOwnProperty.call(g,m))return g[m]};return"        <transition "+((r=f(n,"if").call(c,e!=null?f(e,"event"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:16,column:20},end:{line:16,column:58}}}))!=null?r:"")+((r=f(n,"if").call(c,e!=null?f(e,"cond"):e,{name:"if",hash:{},fn:t.program(14,a,0),inverse:t.noop,data:a,loc:{start:{line:16,column:58},end:{line:16,column:93}}}))!=null?r:"")+((r=f(n,"if").call(c,e!=null?f(e,"type"):e,{name:"if",hash:{},fn:t.program(16,a,0),inverse:t.noop,data:a,loc:{start:{line:16,column:93},end:{line:16,column:128}}}))!=null?r:"")+'target="'+t.escapeExpression(typeof(e=(e=f(n,"target")||(e!=null?f(e,"target"):e))!=null?e:t.hooks.helperMissing)=="function"?e.call(c,{name:"target",hash:{},data:a,loc:{start:{line:16,column:136},end:{line:16,column:146}}}):e)+`"/>
`},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,a){var r=t.lookupProperty||function(c,f){if(Object.prototype.hasOwnProperty.call(c,f))return c[f]};return(a=r(n,"each").call(e!=null?e:t.nullContext||{},e!=null?r(e,"states"):e,{name:"each",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:1,column:0},end:{line:20,column:9}}}))!=null?a:""},usePartial:!0,useData:!0})});var tl=X((Ms,el)=>{var Ke=require("handlebars/dist/handlebars.runtime.js");Zn();Kn();Ke.registerPartial("scxml.states.template.hbs",Ke.templates["scxml.states.template.hbs"]);el.exports=function(e){return Ke.templates["scxml.template.hbs"](e)}});var Pi={};Tr(Pi,{default:()=>wi,getAllowedValues:()=>sl,render:()=>ol,version:()=>il});var Me=B(require("lodash.get"),1),fn=Object.freeze({inputType:{default:"smcat",values:[{name:"smcat"},{name:"json"},{name:"scxml"}]},outputType:{default:"svg",values:[{name:"svg"},{name:"eps"},{name:"ps"},{name:"ps2"},{name:"dot"},{name:"smcat"},{name:"json"},{name:"ast"},{name:"scxml"},{name:"oldsvg"},{name:"oldps2"},{name:"oldeps"},{name:"scjson"}]},engine:{default:"dot",values:[{name:"dot"},{name:"circo"},{name:"fdp"},{name:"neato"},{name:"osage"},{name:"twopi"}]},direction:{default:"top-down",values:[{name:"top-down"},{name:"bottom-top"},{name:"left-right"},{name:"right-left"}]},desugar:{default:!1,values:[{name:!0},{name:!1}]}});function Mr(t,e){return(0,Me.default)(t,e,(0,Me.default)(fn,`${e}.default`))}function Hr(){return fn}var q={getAllowedValues:Hr,getOptionValue:Mr};var En=B(require("ajv"),1);function mn(t,e=!1){let n=[];return t.filter(d=>Boolean(d.statemachine)).forEach(d=>{Object.prototype.hasOwnProperty.call(d.statemachine,"states")&&(n=n.concat(mn(d.statemachine.states,!0)))}),n.concat(t.map(d=>({name:d.name,type:d.type,statemachine:Boolean(d.statemachine),hasParent:e})))}function pn(t){let e=[];return Object.prototype.hasOwnProperty.call(t,"transitions")&&(e=t.transitions),Object.prototype.hasOwnProperty.call(t,"states")&&t.states.filter(n=>Boolean(n.statemachine)).forEach(n=>{e=e.concat(pn(n.statemachine))}),e}var D=class{constructor(e){this._flattenedStates=mn(e.states||[]),this._flattenedTransitions=pn(e)}get flattenedTransitions(){return this._flattenedTransitions}findStateByName(e){return this._flattenedStates.find(n=>n.name===e)}findStatesByTypes(e){return this._flattenedStates.filter(n=>e.includes(n.type))}findExternalSelfTransitions(e){return this._flattenedTransitions.filter(n=>n.from===e&&n.to===e&&n.type!=="internal")}findTransitionsByFrom(e){return this._flattenedTransitions.filter(n=>n.from===e)}findTransitionsByTo(e){return this._flattenedTransitions.filter(n=>n.to===e)}};var qr="^(entry|activity|exit)\\s*/\\s*([^\\n$]*)(\\n|$)",Ir=new RegExp(qr);function dn(t,e){return t.includes(e)}var Nr=[{re:/initial/,stateType:"initial"},{re:/final/,stateType:"final"},{re:/parallel/,stateType:"parallel"},{re:/(deep.*history)|(history.*deep)/,stateType:"deephistory"},{re:/history/,stateType:"history"},{re:/^\^.*/,stateType:"choice"},{re:/^].*/,stateType:"forkjoin"}];function Sr(t){return e=>e.re.test(t)}function hn(t){return(Nr.find(Sr(t))||{stateType:"regular"}).stateType}function He(t){return{name:t,type:hn(t)}}function gn(t){return Boolean(t.statemachine)}function yn(t){let e=t.states||[];return e.filter(gn).reduce((n,d)=>n.concat(yn(d.statemachine)),e.map(n=>n.name))}function vn(t,e){e=e||yn(t),t.states=t.states||[];let n=t.transitions||[];return t.states.filter(gn).forEach(d=>{d.statemachine.states=vn(d.statemachine,e)}),n.forEach(d=>{dn(e,d.from)||(e.push(d.from),t.states.push(He(d.from))),dn(e,d.to)||(e.push(d.to),t.states.push(He(d.to)))}),t.states}function Vr(t,e){let n="junction";return t<=1&&e>1&&(n="fork"),t>1&&e<=1&&(n="join"),n}function bn(t,e=new D(t)){return t.states=t.states.map(n=>{if(n.type==="forkjoin"&&!n.typeExplicitlySet){let d=e.findTransitionsByTo(n.name).length,a=e.findTransitionsByFrom(n.name).length;n.type=Vr(d,a)}return n.statemachine&&(n.statemachine=bn(n.statemachine,e)),n}),t}function Dr(t,e){return t.name===e.name}function Lr(t,e){return t.reduce((n,d)=>{let a=n.findIndex(r=>e(r,d));return a>-1?(n[a]=d,n):n.concat(d)},[])}function zr(t){let e=/([^[/]+)?(\[[^\]]+\])?[^/]*(\/.+)?/,n={},d=t.match(e),a=1,r=2,c=3;return d[a]&&(n.event=d[a].trim()),d[r]&&(n.cond=d[r].slice(1,-1).trim()),d[c]&&(n.action=d[c].slice(1,d[c].length).trim()),n}function $n(t,e,n,d=a=>a){d(n)&&(t[e]=n)}function Ur(t,e,n){$n(t,e,n,d=>d&&d.length>0)}function Gr(t){let e=t.match(Ir),n=1,d=2;return e?{type:e[n],body:e[d]}:{type:"activity",body:t}}function Xr(t){return t.split(/\n\s*/g).map(e=>e.trim()).map(Gr)}var T={initState:He,extractUndeclaredStates:vn,classifyForkJoins:bn,getStateType:hn,stateEqual:Dr,uniq:Lr,parseTransitionExpression:zr,extractActions:Xr,setIf:$n,setIfNotEmpty:Ur};function Jr(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function Z(t,e,n,d){var a=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(a,Z.prototype),a.expected=e,a.found=n,a.location=d,a.name="SyntaxError",a}Jr(Z,Error);function qe(t,e,n){return n=n||" ",t.length>e?t:(e-=t.length,n+=n.repeat(e),t+n.slice(0,e))}Z.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n=null,d;for(d=0;d<t.length;d++)if(t[d].source===this.location.source){n=t[d].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,r=this.location.source+":"+a.line+":"+a.column;if(n){var c=this.location.end,f=qe("",a.line.toString().length),g=n[a.line-1],m=a.line===c.line?c.column:g.length+1;e+=`
 --> `+r+`
`+f+` |
`+a.line+" | "+g+`
`+f+" | "+qe("",a.column-1)+qe("",m-a.column,"^")}else e+=`
 at `+r}return e};Z.buildMessage=function(t,e){var n={literal:function(m){return'"'+a(m.text)+'"'},class:function(m){var p=m.parts.map(function(o){return Array.isArray(o)?r(o[0])+"-"+r(o[1]):r(o)});return"["+(m.inverted?"^":"")+p+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function d(m){return m.charCodeAt(0).toString(16).toUpperCase()}function a(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+d(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+d(p)})}function r(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+d(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+d(p)})}function c(m){return n[m.type](m)}function f(m){var p=m.map(c),o,h;if(p.sort(),p.length>0){for(o=1,h=1;o<p.length;o++)p[o-1]!==p[o]&&(p[h]=p[o],h++);p.length=h}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function g(m){return m?'"'+a(m)+'"':"end of input"}return"Expected "+f(t)+" but "+g(e)+" found."};function xn(t,e){e=e!==void 0?e:{};var n={},d=e.grammarSource,a={program:Xt},r=Xt,c=",",f=";",g="[",m="]",p=":",o="{",h="}",u="=",k="label",$="color",M="class",N="active",nt="type",lt="regular",at="initial",rt="terminate",ot="final",it="parallel",st="history",ct="deephistory",ut="choice",ft="forkjoin",mt="fork",pt="join",dt="junction",cl="width",ht="external",gt="internal",yt="->",vt="=>>",bt="=>",$t=">>",xt=":>",kt="--",wt="==",Pt="<-",Ot="<<=",Ct="<=",Et="<<",jt="<:",ul="#",fl=".",U='"',he='\\"',At="/*",ge="*/",_t="//",Ft=/^[0-9]/,Rt=/^[a-zA-Z0-9_\- ]/,Tt=/^[^;, "\t\n\r=\-><:{[]/,ml=/^[ \t]/,pl=/^[\r\n]/,dl=/^[^\r\n]/,hl=_("statemachine"),ye=E(",",!1),ee=E(";",!1),gl=_("state"),Bt=E("[",!1),Mt=E("]",!1),Ht=E(":",!1),re=E("{",!1),yl=E("}",!1),vl=_("extended state attributes"),bl=_("extended state attribute"),Q=E("=",!1),$l=_("state attribute name"),xl=E("label",!0),qt=E("color",!0),kl=_("class attribute"),wl=E("class",!0),Pl=_("state flag"),Ol=E("active",!0),Cl=_("state type"),It=E("type",!0),El=_("state type type"),jl=E("regular",!1),Al=E("initial",!1),_l=E("terminate",!1),Fl=E("final",!1),Rl=E("parallel",!1),Tl=E("history",!1),Bl=E("deephistory",!1),Ml=E("choice",!1),Hl=E("forkjoin",!1),ql=E("fork",!1),Il=E("join",!1),Nl=E("junction",!1),Sl=_("transition"),Vl=_("extended transition attributes"),Dl=_("extended transition attribute"),Ll=_("transition attribute name"),zl=_("transition type name"),Ul=_("numeric transition attribute name"),Gl=E("width",!0),Xl=_("transition type value"),Jl=E("external",!1),Ql=E("internal",!1),Wl=_("left to right arrow"),Yl=E("->",!1),Zl=E("=>>",!1),Kl=E("=>",!1),ea=E(">>",!1),ta=E(":>",!1),na=E("--",!1),la=E("==",!1),aa=_("right to left arrow"),ra=E("<-",!1),oa=E("<<=",!1),ia=E("<=",!1),sa=E("<<",!1),ca=E("<:",!1),ua=E("#",!1),fa=E(".",!1),Nt=ne([["0","9"]],!1,!1),ma=_("double quoted string"),G=E('"',!1),St=E('\\"',!1),W=Xa(),pa=_("valid class string"),Vt=ne([["a","z"],["A","Z"],["0","9"],"_","-"," "],!1,!1),da=_("identifier"),Dt=ne([";",","," ",'"',"	",`
`,"\r","=","-",">","<",":","{","["],!0,!1),ha=_("whitespace"),ga=ne([" ","	"],!1,!1),ya=_("line end"),va=ne(["\r",`
`],!1,!1),ba=E("/*",!1),Lt=E("*/",!1),$a=E("//",!1),xa=ne(["\r",`
`],!0,!1),ka=_("comment"),wa=function(l){return l.states=T.extractUndeclaredStates(l),T.classifyForkJoins(l)},Pa=function(l,s){let v={};return T.setIf(v,"states",l),T.setIfNotEmpty(v,"transitions",s),v},Ae=function(l){return l},Oa=function(l){return T.uniq(l[0].concat(l[1]),T.stateEqual)},Ca=function(l,s,v){return v},Ea=function(l,s,v,y){return y},ja=function(l,s,v,y,w){return w},Aa=function(l,s,v,y,w){let C=T.initState(s);return(v||[]).forEach(j=>T.setIf(C,j.name,j.value)),T.setIf(C,"typeExplicitlySet",(v||[]).some(j=>j.typeExplicitlySet)),T.setIf(C,"statemachine",w),T.setIfNotEmpty(C,"note",l),Boolean(y)&&T.setIfNotEmpty(C,"actions",T.extractActions(y)),C},oe=function(l,s){return{name:l,value:s}},_a=function(l,s){return{name:l,value:s}},Fa=function(l){return{name:l,value:!0}},Ra=function(l,s){return{name:l,value:s,typeExplicitlySet:!0}},te=function(l){return l.toLowerCase()},Ta=function(l,s,v){return v},Ba=function(l,s,v,y){return y},Ma=function(l,s,v,y){return y&&(s.label=y,s=Object.assign(s,T.parseTransitionExpression(y))),(v||[]).forEach(w=>T.setIf(s,w.name,w.value)),T.setIfNotEmpty(s,"note",l),s},Ha=function(l,s){return{from:l,to:s}},qa=function(l,s){return{from:s,to:l}},Ia=function(l){return l},Na=function(l){return l.join("").trim()},Sa=function(l){return parseFloat(l.join(""))},Va=function(l){return parseInt(l.join(""),10)},Da=function(l){return l.join("").replace(/\\\"/g,'"')},I=function(l){return l},La=function(l){return l.join("")},zt=function(l){return l.join("").trim()},za=function(l){return l.join("")},Ua=function(l,s,v){return l+s.join("")+v},Ga=function(l,s){return l+s.join("")},i=0,P=0,ve=[{line:1,column:1}],S=0,_e=[],b=0,be;if("startRule"in e){if(!(e.startRule in a))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');r=a[e.startRule]}function Oi(){return t.substring(P,i)}function Ci(){return P}function Ei(){return{source:d,start:P,end:i}}function ji(){return ie(P,i)}function Ai(l,s){throw s=s!==void 0?s:ie(P,i),Gt([_(l)],t.substring(P,i),s)}function _i(l,s){throw s=s!==void 0?s:ie(P,i),Qa(l,s)}function E(l,s){return{type:"literal",text:l,ignoreCase:s}}function ne(l,s,v){return{type:"class",parts:l,inverted:s,ignoreCase:v}}function Xa(){return{type:"any"}}function Ja(){return{type:"end"}}function _(l){return{type:"other",description:l}}function Ut(l){var s=ve[l],v;if(s)return s;for(v=l-1;!ve[v];)v--;for(s=ve[v],s={line:s.line,column:s.column};v<l;)t.charCodeAt(v)===10?(s.line++,s.column=1):s.column++,v++;return ve[l]=s,s}function ie(l,s){var v=Ut(l),y=Ut(s);return{source:d,start:{offset:l,line:v.line,column:v.column},end:{offset:s,line:y.line,column:y.column}}}function x(l){i<S||(i>S&&(S=i,_e=[]),_e.push(l))}function Qa(l,s){return new Z(l,null,null,s)}function Gt(l,s,v){return new Z(Z.buildMessage(l,s),l,s,v)}function Xt(){var l,s,v,y;return l=i,s=O(),v=Jt(),y=O(),P=l,l=wa(v),l}function Jt(){var l,s,v,y;for(b++,l=i,s=Wa(),s===n&&(s=null),v=[],y=Yt();y!==n;)v.push(y),y=Yt();return P=l,l=Pa(s,v),b--,s=n,b===0&&x(hl),l}function Wa(){var l,s,v,y,w,C;for(l=i,s=i,v=[],y=i,w=Fe(),w!==n?(t.charCodeAt(i)===44?(C=c,i++):(C=n,b===0&&x(ye)),C!==n?(P=y,y=Ae(w)):(i=y,y=n)):(i=y,y=n);y!==n;)v.push(y),y=i,w=Fe(),w!==n?(t.charCodeAt(i)===44?(C=c,i++):(C=n,b===0&&x(ye)),C!==n?(P=y,y=Ae(w)):(i=y,y=n)):(i=y,y=n);return y=i,w=Fe(),w!==n?(t.charCodeAt(i)===59?(C=f,i++):(C=n,b===0&&x(ee)),C!==n?(P=y,y=Ae(w)):(i=y,y=n)):(i=y,y=n),y!==n?(v=[v,y],s=v):(i=s,s=n),s!==n&&(P=l,s=Oa(s)),l=s,l}function Fe(){var l,s,v,y,w,C,j,A,L,H,Y,an,Te,Or,Be;for(b++,l=i,s=[],v=$e();v!==n;)s.push(v),v=$e();return v=O(),y=ce(),y!==n?(w=O(),C=i,t.charCodeAt(i)===91?(j=g,i++):(j=n,b===0&&x(Bt)),j!==n?(A=Ya(),t.charCodeAt(i)===93?(L=m,i++):(L=n,b===0&&x(Mt)),L!==n?(P=C,C=Ca(s,y,A)):(i=C,C=n)):(i=C,C=n),C===n&&(C=null),j=O(),A=i,t.charCodeAt(i)===58?(L=p,i++):(L=n,b===0&&x(Ht)),L!==n?(H=O(),Y=pr(),Y!==n?(an=O(),P=A,A=Ea(s,y,C,Y)):(i=A,A=n)):(i=A,A=n),A===n&&(A=null),L=O(),H=i,t.charCodeAt(i)===123?(Y=o,i++):(Y=n,b===0&&x(re)),Y!==n?(an=O(),Te=Jt(),Te!==n?(Or=O(),t.charCodeAt(i)===125?(Be=h,i++):(Be=n,b===0&&x(yl)),Be!==n?(P=H,H=ja(s,y,C,A,Te)):(i=H,H=n)):(i=H,H=n)):(i=H,H=n),H===n&&(H=null),Y=O(),P=l,l=Aa(s,y,C,A,H)):(i=l,l=n),b--,l===n&&(s=n,b===0&&x(gl)),l}function Ya(){var l,s;for(b++,l=[],s=Qt();s!==n;)l.push(s),s=Qt();return b--,s=n,b===0&&x(vl),l}function Qt(){var l,s,v,y,w,C,j,A;return b++,l=i,s=O(),v=Za(),v!==n?(y=O(),t.charCodeAt(i)===61?(w=u,i++):(w=n,b===0&&x(Q)),w!==n?(C=O(),j=se(),j!==n?(A=O(),P=l,l=oe(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n),l===n&&(l=i,s=O(),v=Wt(),v!==n?(y=O(),t.charCodeAt(i)===61?(w=u,i++):(w=n,b===0&&x(Q)),w!==n?(C=O(),j=Kt(),j!==n?(A=O(),P=l,l=_a(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n),l===n&&(l=i,s=O(),v=Ka(),v!==n?(y=O(),P=l,l=Fa(v)):(i=l,l=n),l===n&&(l=i,s=O(),v=er(),v!==n?(y=O(),t.charCodeAt(i)===61?(w=u,i++):(w=n,b===0&&x(Q)),w!==n?(C=O(),j=tr(),j!==n?(A=O(),P=l,l=Ra(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n)))),b--,l===n&&(s=n,b===0&&x(bl)),l}function Za(){var l,s;return b++,l=i,t.substr(i,5).toLowerCase()===k?(s=t.substr(i,5),i+=5):(s=n,b===0&&x(xl)),s===n&&(t.substr(i,5).toLowerCase()===$?(s=t.substr(i,5),i+=5):(s=n,b===0&&x(qt))),s!==n&&(P=l,s=te(s)),l=s,b--,l===n&&(s=n,b===0&&x($l)),l}function Wt(){var l,s;return b++,l=i,t.substr(i,5).toLowerCase()===M?(s=t.substr(i,5),i+=5):(s=n,b===0&&x(wl)),s!==n&&(P=l,s=te(s)),l=s,b--,l===n&&(s=n,b===0&&x(kl)),l}function Ka(){var l,s;return b++,l=i,t.substr(i,6).toLowerCase()===N?(s=t.substr(i,6),i+=6):(s=n,b===0&&x(Ol)),s!==n&&(P=l,s=te(s)),l=s,b--,l===n&&(s=n,b===0&&x(Pl)),l}function er(){var l,s;return b++,l=i,t.substr(i,4).toLowerCase()===nt?(s=t.substr(i,4),i+=4):(s=n,b===0&&x(It)),s!==n&&(P=l,s=te(s)),l=s,b--,l===n&&(s=n,b===0&&x(Cl)),l}function tr(){var l,s;return b++,t.substr(i,7)===lt?(l=lt,i+=7):(l=n,b===0&&x(jl)),l===n&&(t.substr(i,7)===at?(l=at,i+=7):(l=n,b===0&&x(Al)),l===n&&(t.substr(i,9)===rt?(l=rt,i+=9):(l=n,b===0&&x(_l)),l===n&&(t.substr(i,5)===ot?(l=ot,i+=5):(l=n,b===0&&x(Fl)),l===n&&(t.substr(i,8)===it?(l=it,i+=8):(l=n,b===0&&x(Rl)),l===n&&(t.substr(i,7)===st?(l=st,i+=7):(l=n,b===0&&x(Tl)),l===n&&(t.substr(i,11)===ct?(l=ct,i+=11):(l=n,b===0&&x(Bl)),l===n&&(t.substr(i,6)===ut?(l=ut,i+=6):(l=n,b===0&&x(Ml)),l===n&&(t.substr(i,8)===ft?(l=ft,i+=8):(l=n,b===0&&x(Hl)),l===n&&(t.substr(i,4)===mt?(l=mt,i+=4):(l=n,b===0&&x(ql)),l===n&&(t.substr(i,4)===pt?(l=pt,i+=4):(l=n,b===0&&x(Il)),l===n&&(t.substr(i,8)===dt?(l=dt,i+=8):(l=n,b===0&&x(Nl))))))))))))),b--,l===n&&(s=n,b===0&&x(El)),l}function Yt(){var l,s,v,y,w,C,j,A,L;for(b++,l=i,s=[],v=$e();v!==n;)s.push(v),v=$e();return v=nr(),v!==n?(y=i,t.charCodeAt(i)===91?(w=g,i++):(w=n,b===0&&x(Bt)),w!==n?(C=lr(),t.charCodeAt(i)===93?(j=m,i++):(j=n,b===0&&x(Mt)),j!==n?(A=O(),P=y,y=Ta(s,v,C)):(i=y,y=n)):(i=y,y=n),y===n&&(y=null),w=i,t.charCodeAt(i)===58?(C=p,i++):(C=n,b===0&&x(Ht)),C!==n?(j=O(),A=mr(),A!==n?(L=O(),P=w,w=Ba(s,v,y,A)):(i=w,w=n)):(i=w,w=n),w===n&&(w=null),t.charCodeAt(i)===59?(C=f,i++):(C=n,b===0&&x(ee)),C!==n?(P=l,l=Ma(s,v,y,w)):(i=l,l=n)):(i=l,l=n),b--,l===n&&(s=n,b===0&&x(Sl)),l}function nr(){var l,s,v,y,w,C,j,A;return l=i,s=O(),v=ce(),v!==n?(y=O(),w=sr(),w!==n?(C=O(),j=ce(),j!==n?(A=O(),P=l,l=Ha(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n),l===n&&(l=i,s=O(),v=ce(),v!==n?(y=O(),w=cr(),w!==n?(C=O(),j=ce(),j!==n?(A=O(),P=l,l=qa(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n)),l}function lr(){var l,s;for(b++,l=[],s=Zt();s!==n;)l.push(s),s=Zt();return b--,s=n,b===0&&x(Vl),l}function Zt(){var l,s,v,y,w,C,j,A;return b++,l=i,s=O(),v=ar(),v!==n?(y=O(),t.charCodeAt(i)===61?(w=u,i++):(w=n,b===0&&x(Q)),w!==n?(C=O(),j=se(),j!==n?(A=O(),P=l,l=oe(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n),l===n&&(l=i,s=O(),v=Wt(),v!==n?(y=O(),t.charCodeAt(i)===61?(w=u,i++):(w=n,b===0&&x(Q)),w!==n?(C=O(),j=Kt(),j!==n?(A=O(),P=l,l=oe(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n),l===n&&(l=i,s=O(),v=rr(),v!==n?(y=O(),t.charCodeAt(i)===61?(w=u,i++):(w=n,b===0&&x(Q)),w!==n?(C=O(),j=ir(),j!==n?(A=O(),P=l,l=oe(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n),l===n&&(l=i,s=O(),v=or(),v!==n?(y=O(),t.charCodeAt(i)===61?(w=u,i++):(w=n,b===0&&x(Q)),w!==n?(C=O(),j=ur(),j!==n?(A=O(),P=l,l=oe(v,j)):(i=l,l=n)):(i=l,l=n)):(i=l,l=n)))),b--,l===n&&(s=n,b===0&&x(Dl)),l}function ar(){var l,s;return b++,l=i,t.substr(i,5).toLowerCase()===$?(s=t.substr(i,5),i+=5):(s=n,b===0&&x(qt)),s!==n&&(P=l,s=te(s)),l=s,b--,l===n&&(s=n,b===0&&x(Ll)),l}function rr(){var l,s;return b++,l=i,t.substr(i,4).toLowerCase()===nt?(s=t.substr(i,4),i+=4):(s=n,b===0&&x(It)),s!==n&&(P=l,s=te(s)),l=s,b--,l===n&&(s=n,b===0&&x(zl)),l}function or(){var l,s;return b++,l=i,t.substr(i,5).toLowerCase()===cl?(s=t.substr(i,5),i+=5):(s=n,b===0&&x(Gl)),s!==n&&(P=l,s=Ia(s)),l=s,b--,l===n&&(s=n,b===0&&x(Ul)),l}function ir(){var l,s;return b++,t.substr(i,8)===ht?(l=ht,i+=8):(l=n,b===0&&x(Jl)),l===n&&(t.substr(i,8)===gt?(l=gt,i+=8):(l=n,b===0&&x(Ql))),b--,l===n&&(s=n,b===0&&x(Xl)),l}function sr(){var l,s;return b++,t.substr(i,2)===yt?(l=yt,i+=2):(l=n,b===0&&x(Yl)),l===n&&(t.substr(i,3)===vt?(l=vt,i+=3):(l=n,b===0&&x(Zl)),l===n&&(t.substr(i,2)===bt?(l=bt,i+=2):(l=n,b===0&&x(Kl)),l===n&&(t.substr(i,2)===$t?(l=$t,i+=2):(l=n,b===0&&x(ea)),l===n&&(t.substr(i,2)===xt?(l=xt,i+=2):(l=n,b===0&&x(ta)),l===n&&(t.substr(i,2)===kt?(l=kt,i+=2):(l=n,b===0&&x(na)),l===n&&(t.substr(i,2)===wt?(l=wt,i+=2):(l=n,b===0&&x(la)))))))),b--,l===n&&(s=n,b===0&&x(Wl)),l}function cr(){var l,s;return b++,t.substr(i,2)===Pt?(l=Pt,i+=2):(l=n,b===0&&x(ra)),l===n&&(t.substr(i,3)===Ot?(l=Ot,i+=3):(l=n,b===0&&x(oa)),l===n&&(t.substr(i,2)===Ct?(l=Ct,i+=2):(l=n,b===0&&x(ia)),l===n&&(t.substr(i,2)===Et?(l=Et,i+=2):(l=n,b===0&&x(sa)),l===n&&(t.substr(i,2)===jt?(l=jt,i+=2):(l=n,b===0&&x(ca)))))),b--,l===n&&(s=n,b===0&&x(aa)),l}function $e(){var l,s,v,y,w;if(l=i,s=O(),t.charCodeAt(i)===35?(v=ul,i++):(v=n,b===0&&x(ua)),v!==n){for(y=[],w=xe();w!==n;)y.push(w),w=xe();P=l,l=Na(y)}else i=l,l=n;return l}function ur(){var l;return l=fr(),l===n&&(l=Re()),l}function fr(){var l,s,v,y,w;return l=i,s=i,v=Re(),v!==n?(t.charCodeAt(i)===46?(y=fl,i++):(y=n,b===0&&x(fa)),y!==n?(w=Re(),w!==n?(v=[v,y,w],s=v):(i=s,s=n)):(i=s,s=n)):(i=s,s=n),s!==n&&(P=l,s=Sa(s)),l=s,l}function Re(){var l,s,v;if(l=i,s=[],Ft.test(t.charAt(i))?(v=t.charAt(i),i++):(v=n,b===0&&x(Nt)),v!==n)for(;v!==n;)s.push(v),Ft.test(t.charAt(i))?(v=t.charAt(i),i++):(v=n,b===0&&x(Nt));else s=n;return s!==n&&(P=l,s=Va(s)),l=s,l}function mr(){var l;return l=se(),l===n&&(l=gr()),l}function pr(){var l;return l=se(),l===n&&(l=yr()),l}function se(){var l,s,v,y;return b++,l=i,t.charCodeAt(i)===34?(s=U,i++):(s=n,b===0&&x(G)),s!==n?(v=dr(),t.charCodeAt(i)===34?(y=U,i++):(y=n,b===0&&x(G)),y!==n?(P=l,l=Da(v)):(i=l,l=n)):(i=l,l=n),b--,l===n&&(s=n,b===0&&x(ma)),l}function dr(){var l,s,v,y;for(l=[],s=i,v=i,b++,t.charCodeAt(i)===34?(y=U,i++):(y=n,b===0&&x(G)),b--,y===n?v=void 0:(i=v,v=n),v!==n?(t.substr(i,2)===he?(y=he,i+=2):(y=n,b===0&&x(St)),y===n&&(t.length>i?(y=t.charAt(i),i++):(y=n,b===0&&x(W))),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);s!==n;)l.push(s),s=i,v=i,b++,t.charCodeAt(i)===34?(y=U,i++):(y=n,b===0&&x(G)),b--,y===n?v=void 0:(i=v,v=n),v!==n?(t.substr(i,2)===he?(y=he,i+=2):(y=n,b===0&&x(St)),y===n&&(t.length>i?(y=t.charAt(i),i++):(y=n,b===0&&x(W))),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);return l}function Kt(){var l,s,v,y;return b++,l=i,t.charCodeAt(i)===34?(s=U,i++):(s=n,b===0&&x(G)),s!==n?(v=hr(),t.charCodeAt(i)===34?(y=U,i++):(y=n,b===0&&x(G)),y!==n?(P=l,l=La(v)):(i=l,l=n)):(i=l,l=n),b--,l===n&&(s=n,b===0&&x(pa)),l}function hr(){var l,s,v,y;for(l=[],s=i,v=i,b++,t.charCodeAt(i)===34?(y=U,i++):(y=n,b===0&&x(G)),b--,y===n?v=void 0:(i=v,v=n),v!==n?(Rt.test(t.charAt(i))?(y=t.charAt(i),i++):(y=n,b===0&&x(Vt)),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);s!==n;)l.push(s),s=i,v=i,b++,t.charCodeAt(i)===34?(y=U,i++):(y=n,b===0&&x(G)),b--,y===n?v=void 0:(i=v,v=n),v!==n?(Rt.test(t.charAt(i))?(y=t.charAt(i),i++):(y=n,b===0&&x(Vt)),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);return l}function gr(){var l,s;return l=i,s=br(),P=l,s=zt(s),l=s,l}function yr(){var l,s;return l=i,s=vr(),P=l,s=zt(s),l=s,l}function vr(){var l,s,v,y;for(l=[],s=i,v=i,b++,t.charCodeAt(i)===44?(y=c,i++):(y=n,b===0&&x(ye)),y===n&&(t.charCodeAt(i)===59?(y=f,i++):(y=n,b===0&&x(ee)),y===n&&(t.charCodeAt(i)===123?(y=o,i++):(y=n,b===0&&x(re)))),b--,y===n?v=void 0:(i=v,v=n),v!==n?(t.length>i?(y=t.charAt(i),i++):(y=n,b===0&&x(W)),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);s!==n;)l.push(s),s=i,v=i,b++,t.charCodeAt(i)===44?(y=c,i++):(y=n,b===0&&x(ye)),y===n&&(t.charCodeAt(i)===59?(y=f,i++):(y=n,b===0&&x(ee)),y===n&&(t.charCodeAt(i)===123?(y=o,i++):(y=n,b===0&&x(re)))),b--,y===n?v=void 0:(i=v,v=n),v!==n?(t.length>i?(y=t.charAt(i),i++):(y=n,b===0&&x(W)),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);return l}function br(){var l,s,v,y;for(l=[],s=i,v=i,b++,t.charCodeAt(i)===59?(y=f,i++):(y=n,b===0&&x(ee)),y===n&&(t.charCodeAt(i)===123?(y=o,i++):(y=n,b===0&&x(re))),b--,y===n?v=void 0:(i=v,v=n),v!==n?(t.length>i?(y=t.charAt(i),i++):(y=n,b===0&&x(W)),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);s!==n;)l.push(s),s=i,v=i,b++,t.charCodeAt(i)===59?(y=f,i++):(y=n,b===0&&x(ee)),y===n&&(t.charCodeAt(i)===123?(y=o,i++):(y=n,b===0&&x(re))),b--,y===n?v=void 0:(i=v,v=n),v!==n?(t.length>i?(y=t.charAt(i),i++):(y=n,b===0&&x(W)),y!==n?(P=s,s=I(y)):(i=s,s=n)):(i=s,s=n);return l}function ce(){var l,s,v;if(b++,l=i,s=[],Tt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=n,b===0&&x(Dt)),v!==n)for(;v!==n;)s.push(v),Tt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=n,b===0&&x(Dt));else s=n;return s!==n&&(P=l,s=za(s)),l=s,l===n&&(l=se()),b--,l===n&&(s=n,b===0&&x(da)),l}function en(){var l,s;return b++,l=i,ml.test(t.charAt(i))?(s=t.charAt(i),i++):(s=n,b===0&&x(ga)),s!==n&&(P=l,s=I(s)),l=s,b--,l===n&&(s=n,b===0&&x(ha)),l}function tn(){var l,s;return b++,l=i,pl.test(t.charAt(i))?(s=t.charAt(i),i++):(s=n,b===0&&x(va)),s!==n&&(P=l,s=I(s)),l=s,b--,l===n&&(s=n,b===0&&x(ya)),l}function $r(){var l;return t.substr(i,2)===At?(l=At,i+=2):(l=n,b===0&&x(ba)),l}function xr(){var l;return t.substr(i,2)===ge?(l=ge,i+=2):(l=n,b===0&&x(Lt)),l}function nn(){var l,s,v;return l=i,s=i,b++,t.substr(i,2)===ge?(v=ge,i+=2):(v=n,b===0&&x(Lt)),b--,v===n?s=void 0:(i=s,s=n),s!==n?(t.length>i?(v=t.charAt(i),i++):(v=n,b===0&&x(W)),v!==n?(P=l,l=I(v)):(i=l,l=n)):(i=l,l=n),l}function kr(){var l,s,v,y;if(l=i,s=$r(),s!==n){for(v=[],y=nn();y!==n;)v.push(y),y=nn();y=xr(),y!==n?(P=l,l=Ua(s,v,y)):(i=l,l=n)}else i=l,l=n;return l}function wr(){var l;return t.substr(i,2)===_t?(l=_t,i+=2):(l=n,b===0&&x($a)),l}function xe(){var l;return dl.test(t.charAt(i))?(l=t.charAt(i),i++):(l=n,b===0&&x(xa)),l}function Pr(){var l,s,v,y;if(l=i,s=wr(),s!==n){for(v=[],y=xe();y!==n;)v.push(y),y=xe();P=l,l=Ga(s,v)}else i=l,l=n;return l}function ln(){var l,s;return b++,l=Pr(),l===n&&(l=kr()),b--,l===n&&(s=n,b===0&&x(ka)),l}function O(){var l,s;for(l=[],s=en(),s===n&&(s=tn(),s===n&&(s=ln()));s!==n;)l.push(s),s=en(),s===n&&(s=tn(),s===n&&(s=ln()));return l}if(be=r(),be!==n&&i===t.length)return be;throw be!==n&&i<t.length&&x(Ja()),Gt(_e,S<t.length?t.charAt(S):null,S<t.length?ie(S,S+1):ie(S,S))}var Ne=B(require("fast-xml-parser"),1),K=B(require("he"),1),we=B(require("lodash.castarray"),1),kn=B(require("lodash.get"),1);function Qr(t,e,n){let d="";return t&&(d+=t),e&&(d+=` [${e}]`),n&&(d+=`/ ${n}`),d.trim()}var ke={formatLabel:Qr};var fe=B(require("lodash.get"),1),me=B(require("lodash.castarray"),1);function Wr(t){let e={id:t.id?`${t.id}.initial`:"initial"};return t.initial.transition&&Object.assign(e,{transition:[t.initial.transition]}),e}function Yr(t){return{id:"initial",transition:[{target:t.initial}]}}function Zr(t){let e=[],n={};return t.initial&&(t.initial.transition||t.initial.id?n=Wr(t):n=Yr(t),e.push(n)),e}function Ie(t){return V(F({},t),{initial:Zr(t),state:(0,me.default)((0,fe.default)(t,"state",[])),parallel:(0,me.default)((0,fe.default)(t,"parallel",[])),history:(0,me.default)((0,fe.default)(t,"history",[])),final:(0,me.default)((0,fe.default)(t,"final",[]))})}var Kr=ke.formatLabel;function wn(t,e){return(0,we.default)(t[e]).map(n=>({type:e==="onexit"?"exit":"entry",body:K.default.decode(n).trim()}))}function eo(t){return(0,we.default)(t).map(e=>{let n=K.default.decode(e.id||"").trim();return{type:"activity",body:n||K.default.decode(e||"").trim()}})}function to(t){let e=[];return t.onentry&&(e=e.concat(wn(t,"onentry"))),t.invoke&&(e=e.concat(eo(t.invoke))),t.onexit&&(e=e.concat(wn(t,"onexit"))),e}function no(t,e){return t==="history"&&e.type==="deep"?"deephistory":t}function pe(t){return e=>{let n={name:e.id,type:no(t,e)};return T.getStateType(e.id)!==n.type&&(n.typeExplicitlySet=!0),(e.onentry||e.onexit||e.invoke)&&(n.actions=to(e)),Object.keys(e).some(d=>["initial","state","history","parallel","final"].includes(d))&&(n.statemachine=Pn(e)),n}}function lo(t){let e={};return t.event&&(e.event=t.event.split(/\s+/).join(`
`)),t.cond&&(e.cond=t.cond),t["#text"]&&(e.action=K.default.decode(t["#text"]).trim()),t.type&&(e.type=t.type),e}function ao(t){let e={};typeof t=="string"?e.action=K.default.decode(t).trim():Object.assign(e,lo(t));let n=Kr(e.event,e.cond,e.action);return n&&(e.label=n),e}function ro(t){return(e,n)=>{let d=(n.target||t.id).split(/\s+/),a=ao(n);return e.concat(d.map(r=>F({from:t.id,to:r},a)))}}function Se(t){return t.filter(e=>Object.prototype.hasOwnProperty.call(e,"transition")).reduce((e,n)=>e.concat((0,we.default)(n.transition).reduce(ro(n),[])),[])}function Pn(t){let e=Ie(t),n={};n.states=e.initial.map(pe("initial")).concat(e.state.map(pe("regular"))).concat(e.parallel.map(pe("parallel"))).concat(e.history.map(pe("history"))).concat(e.final.map(pe("final")));let d=Se(e.initial).concat(Se(e.state)).concat(Se(e.parallel));return d.length>0&&(n.transitions=d),n}function On(t){let e=t.trim();if(Ne.default.validate(e)===!0){let n=Ne.default.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,tagValueProcessor:d=>K.default.decode(d),stopNodes:["onentry","onexit","transition"]});return Pn((0,kn.default)(n,"scxml",{}))}throw new Error(`That doesn't look like valid xml ...
`)}var Cn={$schema:"http://json-schema.org/draft-07/schema#",title:"state-machine-cat abstract syntax tree schema",$ref:"#/definitions/StateMachineType",$id:"org.js.state-machine-cat/v7.4.0",definitions:{StateType:{type:"string",enum:["regular","initial","terminate","final","parallel","history","deephistory","choice","forkjoin","fork","join","junction"]},TransitionType:{type:"string",enum:["internal","external"]},NoteType:{type:"array",items:{type:"string"}},ActionTypeType:{type:"string",enum:["entry","activity","exit"]},ActionType:{type:"object",required:["type","body"],additionalProperties:!1,properties:{type:{$ref:"#/definitions/ActionTypeType"},body:{type:"string"}}},ClassType:{type:"string",pattern:"^[a-zA-Z0-9_\\- ]*$"},StateMachineType:{type:"object",additionalProperties:!1,required:["states"],properties:{states:{type:"array",items:{type:"object",required:["name","type"],additionalProperties:!1,properties:{name:{description:"The name and identifier of the state. Unique within the root state machine.",type:"string"},type:{description:"What kind of state (or pseudo state) this state is. E.g. 'regular' for normal states or 'initial', 'final', 'choice' etc for pseudo states. Most UML (pseudo-) states are supported.",$ref:"#/definitions/StateType"},label:{description:"The display label of the state. If it's not present, most renderers will use the states' name in stead.",type:"string"},color:{description:'Color to use for rendering the state. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},active:{description:"If true the state is considered to be active and rendered as such.",type:"boolean"},typeExplicitlySet:{description:"The default parser derives the `type` from the `name` with inband signaling. The user can override that behavior by explicitly setting the `type`. This attribute is there to express that (and make sure that on next parses & processing it doesn't get accidentily re-derived from the name again).",type:"boolean"},isComposite:{description:"convenience, derived attribute - set to true if there's a state machine inside the state; false in all other cases. For internal use - @deprecated",type:"boolean"},actions:{type:"array",description:"A series of actions and their types. The type describe when the action takes place (on entry, exit, or otherwise ('activity'))",items:{$ref:"#/definitions/ActionType"}},note:{description:"Comments related to this state. Some renderers will use the note attribute to render a note (i.e. as a post-it) attached to the state.",$ref:"#/definitions/NoteType"},statemachine:{description:"state machine nested within the state.",$ref:"#/definitions/StateMachineType"}}}},transitions:{type:"array",items:{type:"object",required:["from","to"],additionalProperties:!1,properties:{from:{description:"The name of the state this transition transitions from",type:"string"},to:{description:"The name of the state this transition transitions to",type:"string"},label:{description:"A display label to represent this transition. Parsers can parse this label into events conditions and actions.",type:"string"},event:{description:"Event triggering the transition",type:"string"},cond:{description:"Condition for the transition to occur.",type:"string"},action:{description:"Action to execute when the transition occurs.",type:"string"},note:{description:"Comments related to this transition",$ref:"#/definitions/NoteType"},color:{description:'Color to use for rendering the transition. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},width:{description:"The line width to use for rendering the transition",type:"number",minimum:0,maximum:30},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},type:{description:"Whether the transition is external (default) or internal. See https://www.w3.org/TR/scxml/#transition for details.",$ref:"#/definitions/TransitionType"}}}}}}}};var jn=new En.default;function oo(t,e){if(!jn.validate(t,e))throw new Error(`The provided JSON is not a valid state-machine-cat AST: ${jn.errorsText()}.
`)}var An={getAST(t,e){let n=t;return q.getOptionValue(e,"inputType")==="smcat"?n=xn(t):q.getOptionValue(e,"inputType")==="scxml"?n=On(t):typeof t=="string"&&(n=JSON.parse(t)),oo(Cn,n),n}};var Ve=B(require("lodash.clonedeep"),1),De=B(require("lodash.reject"),1);function io(t,e,n){return t?`${t}${n}${e}`:e}function so(t,e){let n=V(F(F({},t),e),{from:t.from,to:e.to});return e.action&&(n.action=io(t.action,e.action,`
`)),(n.event||n.cond||n.action)&&(n.label=ke.formatLabel(n.event,n.cond,n.action)),n}function co(t,e,n){return t.reduce((d,a)=>(e.forEach((r,c)=>{r===a.to&&n[r]?d=d.concat(n[r].map(f=>so(a,f))):d=c===0?d.concat(a):d}),d),[])}function _n(t,e,n){let d=(0,Ve.default)(t);return d.transitions&&e.length>0&&(d.transitions=co(d.transitions,e,n)),d.states=d.states.map(a=>a.statemachine?V(F({},a),{statemachine:_n(a.statemachine,e,n)}):a),d}function Fn(t,e){let n=(0,Ve.default)(t);return n.transitions&&(n.transitions=(0,De.default)(n.transitions,d=>e.some(a=>a===d.from||a===d.to))),n.states=(0,De.default)(n.states,d=>e.includes(d.name)).map(d=>d.statemachine?V(F({},d),{statemachine:Fn(d.statemachine,e)}):d),n}var Rn=(t,e=["fork","junction","choice"])=>{let n=new D(t),d=n.findStatesByTypes(e).map(c=>c.name),a=d.reduce((c,f)=>(c[f]=n.findTransitionsByFrom(f),c),{}),r=_n(t,d,a);return Fn(r,d)};var ll=B(require("lodash.has"),1),al=B(qn(),1);var zn=B(require("lodash.clonedeep"),1);var xo=[{name:"fontname",value:'"Helvetica"'},{name:"fontsize",value:"12"},{name:"penwidth",value:"2.0"}],ko={dot:[{name:"splines",value:"true"},{name:"ordering",value:"out"},{name:"compound",value:"true"},{name:"overlap",value:"scale"},{name:"nodesep",value:"0.3"},{name:"ranksep",value:"0.1"}],fdp:[{name:"K",value:"0.9"}],osage:[{name:"pack",value:"42"}],neato:[{name:"epsilon",value:"0.9"}]},wo={"bottom-top":[{name:"rankdir",value:"BT"}],"left-right":[{name:"rankdir",value:"LR"}],"right-left":[{name:"rankdir",value:"RL"}]},Po=[{name:"shape",value:"plaintext"},{name:"style",value:"filled"},{name:"fillcolor",value:'"#FFFFFF01"'},{name:"fontname",value:"Helvetica"},{name:"fontsize",value:12},{name:"penwidth",value:"2.0"}],Oo=[{name:"fontname",value:"Helvetica"},{name:"fontsize",value:10}];function Ue(t){return`${t.name}=${t.value}`}var Pe={buildGraphAttributes:(t,e,n)=>xo.concat(ko[t]||[]).concat(wo[e]||[]).concat(n||[]).map(Ue).join(" "),buildNodeAttributes:t=>Po.concat(t||[]).map(Ue).join(" "),buildEdgeAttributes:t=>Oo.concat(t||[]).map(Ue).join(" ")};var In=B(require("lodash.get"),1);function Co(t){return t.replace(/\\/g,"\\\\").replace(/\n\s*/g,"\\l").replace(/"/g,'\\"').concat("\\l")}function Eo(t){return t.replace(/\\/g,"\\\\").replace(/\n\s*/g,"   \\l").replace(/"/g,'\\"').concat("   \\l")}function jo(t){let e=t||"top-down";return e==="top-down"||e==="bottom-top"}function Ao(t,e){return e.from===e.to&&t.findStateByName(e.from).statemachine&&e.type!=="internal"}var z={escapeString:Co,escapeLabelString:Eo,isVertical:jo,isCompositeSelf:Ao};function Nn(t){return e=>e.type===t}function Ge(t){return e=>t.includes(e.type)}function _o(t){return t.label=t.label||t.name,t}function Fo(t){return Object.prototype.hasOwnProperty.call(t,"note")&&(t.noteName=`note_${t.name}`),t}function Ro(t){let e=["state",t.type];return Object.prototype.hasOwnProperty.call(t,"class")&&e.push(t.class.trim().replace(/[ ]{2,}/g," ")),t.class=e.join(" "),t}function To(t){return t==="activity"?"":`${t}/ `}function Bo(t){let e=F({},t);return t.actions&&(e.actions=t.actions.map(n=>`${To(n.type)}${n.body}`)),e}function Mo(t){return Object.prototype.hasOwnProperty.call(t,"note")&&(t.noteFlattened=t.note.join("")),t}function Ho(t){return e=>{let n=(0,In.default)((t||[]).find(d=>d.name==="color"),"value");return n&&!e.color&&Ge(["initial","fork","join","junction","forkjoin","final"])(e)&&(e.color=n),e}}function qo(t){return t.note&&(t.note=t.note.map(z.escapeString)),t}function Io(t){return e=>Ge(["fork","join","forkjoin"])(e)?F({sizingExtras:z.isVertical(t)?"height=0.1":"width=0.1"},e):e}function No(t){return t.type==="parallel"&&t.statemachine&&t.statemachine.states&&(t.statemachine.states=t.statemachine.states.map(e=>Nn("regular")(e)?V(F({},e),{parentIsParallel:!0}):e)),t}var R={isType:Nn,isOneOfTypes:Ge,setLabel:_o,classifyState:Ro,nameNote:Fo,flattenActions:Bo,flattenNote:Mo,recolor:Ho,escapeStateStrings:qo,tipForkJoinStates:Io,flagParallelChildren:No};function So(t){return t.note&&(t.note=t.note.map(z.escapeString)),t.label&&(t.label=z.escapeLabelString(t.label)),t}function Vo(t){return e=>{let n={};return e.isCompositeSelf&&(z.isVertical(t)?n={tailportflags:'tailport="e" headport="e"',headportflags:'tailport="w"'}:e.hasParent?n={tailportflags:'tailport="n" headport="n"',headportflags:'tailport="s"'}:n={tailportflags:'tailport="s" headport="s"',headportflags:'tailport="n"'}),F(F({},e),n)}}function Do(t){let e=["transition"];return t.type&&e.push(t.type),t.class&&e.push(t.class.trim().replace(/[ ]{2,}/g," ")),t.class=e.join(" "),t}var Oe={escapeTransitionStrings:So,addPorts:Vo,classifyTransition:Do};var Ce=class{constructor(){this.reset()}reset(){this.COUNTER=0}next(){return++this.COUNTER}nextAsString(){let e=10;return this.next().toString(e)}};var Un=B(Ln(),1);var Gn={};function Qo(t){return e=>(Object.prototype.hasOwnProperty.call(e,"statemachine")&&(e.nestedExternalSelfTransitions=t.findExternalSelfTransitions(e.name).map(n=>n.name)),e)}function Xn(t,e,n,d){return t.filter(a=>a.statemachine).forEach(a=>{a.statemachine.states=Xn(a.statemachine.states,e,n,d)}),t.map(R.setLabel).map(R.nameNote).map(R.classifyState).map(R.escapeStateStrings).map(R.flattenNote).map(R.flattenActions).map(R.flagParallelChildren).map(R.tipForkJoinStates(e)).map(R.recolor(n)).map(Qo(d))}function Wo(t){return t.initialStates=t.states.filter(R.isType("initial")),t.regularStates=t.states.filter(e=>R.isType("regular")(e)&&!e.statemachine),t.historyStates=t.states.filter(R.isType("history")),t.deepHistoryStates=t.states.filter(R.isType("deephistory")),t.choiceStates=t.states.filter(R.isType("choice")),t.forkjoinStates=t.states.filter(R.isOneOfTypes(["fork","join","forkjoin"])),t.junctionStates=t.states.filter(R.isType("junction")),t.terminateStates=t.states.filter(R.isType("terminate")),t.finalStates=t.states.filter(R.isType("final")),t.compositeStates=t.states.filter(e=>e.statemachine),t}function Yo(t){return e=>(t.findStateByName(e.from).statemachine&&(e.fromComposite=!0),t.findStateByName(e.to).statemachine&&(e.toComposite=!0),e)}function Zo(t){return e=>{let n={};return z.isCompositeSelf(t,e)&&(t.findStateByName(e.from).hasParent?n={hasParent:!0,isCompositeSelf:!0}:n={isCompositeSelf:!0}),F(F({},e),n)}}function Ko(t){return t.name=`tr_${t.from}_${t.to}_${Gn.nextAsString()}`,Boolean(t.note)&&(t.noteName=`note_${t.name}`),t}function ei(t,e){return t.flattenedTransitions.map(Ko).map(Oe.escapeTransitionStrings).map(Oe.classifyTransition).map(R.flattenNote).map(Yo(t)).map(Zo(t)).map(Oe.addPorts(e))}var Ee=(t,e)=>{e=e||{},Gn=new Ce;let n=(0,zn.default)(t),d=new D(n);return n.transitions=ei(d,e.direction),n.states=Xn(n.states,e.direction,e.dotNodeAttrs,d),n=Wo(n),n.graphAttributes=Pe.buildGraphAttributes(q.getOptionValue(e,"engine"),q.getOptionValue(e,"direction"),e.dotGraphAttrs),n.nodeAttributes=Pe.buildNodeAttributes(e.dotNodeAttrs),n.edgeAttributes=Pe.buildEdgeAttributes(e.dotEdgeAttrs),(0,Un.default)(n)};var Jn=B(require("viz.js"),1);var ti={oldsvg:"svg",oldps2:"ps2",oldeps:"eps"},Qe=(t,e)=>(0,Jn.default)(Ee(t,e),{engine:q.getOptionValue(e,"engine"),format:ti[q.getOptionValue(e,"outputType")]||"svg"});var ni=/[\u0000-\u002C|\u002F|\u003B-\u0040|\u005B-\u0060|\u007B-\u00BF|\u00D7|\u00F7|\u0300-\u036F|\u037E|\u2000-\u200B|\u200E-\u206F|\u2190-\u2BFF|\u2FF0-\u3000|\uD800-\uF8FF|\uFDD0-\uFDEF|\uFFFE-\uFFFF]/g,li=/[-|.|0-9|\u00B7|\u0300-\u036F|\u203F-\u2040]/g;function Qn(t){return t.replace(ni,"_")}function ai(t){let e=Qn(t);return e.match(li)&&(e=`_${t}`),e}var je=t=>(t=t||"",t.length===0?"__empty":ai(t[0]).concat(Qn(t.slice(1))));var ri=/[\u00B7|\u0300-\u036F|\u203F-\u2040|\u0000-\u0029|\u002B-\u002C|\u002F|\u003B-\u0040|\u005B-\u0060|\u007B-\u00BF|\u00D7|\u00F7|\u0300-\u036F|\u037E|\u2000-\u200B|\u200E-\u206F|\u2190-\u2BFF|\u2FF0-\u3000|\uD800-\uF8FF|\uFDD0-\uFDEF|\uFFFE-\uFFFF]/g,oi=/[.]/g;function Wn(t){return t.replace(ri,"_")}function ii(t){let e=Wn(t);return e.match(oi)&&(e=`_${t}`),e}function si(t){return t=t.replace(/\s+/g," ").trim(),ii(t[0]).concat(Wn(t.slice(1)))}var Yn=t=>(t=t||"",t.length===0?"empty":t.split(/[\n\r]+/).filter(e=>e.length>0).map(si).join(" "));var ci={regular:"state",initial:"initial",final:"final",terminate:"final",parallel:"parallel",history:"history",deephistory:"history"};function ui(t){return ci[t]||"state"}function fi(t){let e={target:je(t.to)};return Boolean(t.event)&&(e.event=Yn(t.event)),Boolean(t.cond)&&(e.cond=t.cond),Boolean(t.action)&&(e.action=t.action),Boolean(t.type)&&(e.type=t.type),e}function mi(t,e){return t.filter(n=>n.type===e).map(n=>n.body)}function We(t,e,n,d){let a=mi(n,d);a.length>0&&(t[e]=(t[e]||[]).concat(a))}function pi(t,e){Boolean(e.actions)&&(We(t,"onentries",e.actions,"entry"),We(t,"onentries",e.actions,"activity"),We(t,"onexits",e.actions,"exit"))}function di(t,e,n){let d=n.filter(a=>a.from===e.name).map(fi);d.length>0&&(t.transitions=d)}function hi(t,e,n){if(Boolean(e.statemachine)){let d=ae(e.statemachine,null,n);t.states=(t.states||[]).concat(d.states),d.initial&&(t.initial=d.initial)}}function gi(t){return t=t||[],e=>{let n={kind:ui(e.type),id:je(e.name)};return e.type==="deephistory"&&(n.type="deep"),pi(n,e),di(n,e,t),hi(n,e,t),n}}function yi(t){let e=null,n=t.states.filter(d=>d.type==="initial");return n.length>0&&(e=n[0].name),e}function vi(t,e){let n=e;if(e&&t.transitions){let d=t.transitions.filter(a=>a.from===e);d.length>0&&!d[0].action&&(n=d[0].to)}return n}function ae(t,e,n){let d=yi(t),a=vi(t,d),r={states:t.states.filter(c=>a&&a!==d?c.type!=="initial":!0).map(gi(n||new D(t).flattenedTransitions))};return a&&(r.initial=je(a)),r}var nl=B(tl(),1);function et(t){return(0,nl.default)(ae(t))}function tt(t){let e={smcat:al.default,dot:Ee,svg:Qe,oldsvg:Qe,scjson:ae,scxml:et};return(0,ll.default)(e,t)?e[t]:n=>n}var rl="9.2.2";function ol(t,e){let n=An.getAST(t,e),d=q.getOptionValue(e,"desugar");return tt(q.getOptionValue(e,"outputType"))(d?Rn(n):n,e)}var il=rl;function sl(){return q.getAllowedValues()}var wi={render:ol,version:il,getAllowedValues:sl};module.exports=Br(Pi);
